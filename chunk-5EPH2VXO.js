import{a as J}from"./chunk-UMYJIUDX.js";import{a as A,b as G,c as K,d as U,e as Y}from"./chunk-BWLKB7OI.js";import{f as x}from"./chunk-6GCO2BRC.js";import{a as D}from"./chunk-QQTTX4SM.js";import{a as H}from"./chunk-XXWI5HUA.js";import{p as q}from"./chunk-LWZQ6JOT.js";import{a as j,b as B}from"./chunk-6RI4EBCT.js";import{a as z,c as R,g as N,i as L}from"./chunk-CG2SNRMW.js";import{e as y,f as V,s as F}from"./chunk-GB5FS4AS.js";import{aa as w}from"./chunk-KBHRRCXS.js";import{Db as k,E as g,Ea as M,Fc as E,Ib as b,Nb as a,Xb as e,Yb as i,Zb as I,bc as _,db as S,hb as r,ia as f,jc as p,lc as v,m as u,ra as m,rb as T,sa as d,vc as O,wc as o,xc as P,yc as C}from"./chunk-GTZL7DLP.js";var X=n=>["/collections",n];function Z(n,c){if(n&1&&(e(0,"p"),o(1),i()),n&2){let l=v();r(),C("Status: ",l.collection().isPublic?"Publiczna":"Prywatna","")}}function $(n,c){if(n&1){let l=_();e(0,"button",9),p("click",function(s){return m(l),d(s.stopPropagation())}),e(1,"mat-icon"),o(2,"more_horiz"),i()()}if(n&2){v();let l=O(13);a("matMenuTriggerFor",l)}}var Q=class n{isOnCollectionPage=!1;collection=M.required();collectionService=f(D);notificationService=f(F);dialogService=f(Y);movieTilePlaceholder="movie-tile-placeholder.png";seriesTilePlaceholder="series-tile-placeholder.png";gameTilePlaceholder="game-tile-placeholder.png";bookTilePlaceholder="book-tile-placeholder.png";customTilePlaceholder="custom-tile-placeholder.png";tileImage="";isEditing=k(!1);onPublicStatusChange(){this.collection().isPublic?this.togglePublicStatus():this.dialogService.openConfirmChangeCollectionStatusToPublicDialog().subscribe(c=>{c&&this.togglePublicStatus()})}onRename(){this.isEditing.set(!0)}confirmRename(c){this.collectionService.updateCollectionName(this.collection().id,c,this.collection().name).pipe(g(()=>(this.notificationService.showFailure(),u))).subscribe(),this.isEditing.set(!1)}onDelete(){this.dialogService.openConfirmDeleteDialog(this.collection().name).subscribe(c=>{c&&this.collectionService.deleteCollection(this.collection().id).pipe(g(()=>(this.notificationService.showFailure(),u))).subscribe()})}togglePublicStatus(){this.collectionService.updateCollectionPublicStatus(this.collection().id,!this.collection().isPublic).pipe(g(()=>(this.notificationService.showFailure(),u))).subscribe()}ngOnInit(){switch(this.collection().category){case"series":this.tileImage=this.seriesTilePlaceholder;break;case"movie":this.tileImage=this.movieTilePlaceholder;break;case"game":this.tileImage=this.gameTilePlaceholder;break;case"book":this.tileImage=this.bookTilePlaceholder;break;case"custom":this.tileImage=this.customTilePlaceholder;break;default:this.tileImage=this.customTilePlaceholder}}static \u0275fac=function(l){return new(l||n)};static \u0275cmp=T({type:n,selectors:[["app-collection-tile"]],inputs:{isOnCollectionPage:"isOnCollectionPage",collection:[1,"collection"]},decls:29,vars:12,consts:[["menu","matMenu"],[1,"collection-card",3,"routerLink"],["mat-card-image","","appImgFallback","movie-tile-placeholder.png","alt","Collection image","draggable","false",3,"src"],[1,"collection-card-content"],[1,"collection-details"],[3,"editEnd","text","isEditing"],[4,"ngIf"],["mat-icon-button","","class","menu-button",3,"matMenuTriggerFor","click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-icon-button","",1,"menu-button",3,"click","matMenuTriggerFor"]],template:function(l,t){if(l&1){let s=_();e(0,"mat-card",1),I(1,"img",2),e(2,"mat-card-content",3)(3,"div",4)(4,"h1")(5,"app-editable-text-field",5),p("editEnd",function(W){return m(s),d(t.confirmRename(W))}),i()(),e(6,"p"),o(7),i(),b(8,Z,2,1,"p",6),e(9,"p"),o(10),i()(),b(11,$,3,1,"button",7),e(12,"mat-menu",null,0)(14,"button",8),p("click",function(){return m(s),d(t.onRename())}),e(15,"mat-icon"),o(16,"edit"),i(),e(17,"span"),o(18,"Rename"),i()(),e(19,"button",8),p("click",function(){return m(s),d(t.onPublicStatusChange())}),e(20,"mat-icon"),o(21),i(),e(22,"span"),o(23),i()(),e(24,"button",8),p("click",function(){return m(s),d(t.onDelete())}),e(25,"mat-icon"),o(26,"delete"),i(),e(27,"span"),o(28,"Delete"),i()()()()()}l&2&&(a("routerLink",E(10,X,t.collection().id)),r(),a("src",t.tileImage,S),r(4),a("text",t.collection().name)("isEditing",t.isEditing()),r(2),C("Kategoria: ",t.collection().category,""),r(),a("ngIf",t.isOnCollectionPage),r(2),C("Liczba element\xF3w: ",t.collection().itemCount,""),r(),a("ngIf",t.isOnCollectionPage),r(10),P(t.collection().isPublic?"lock":"lock_open"),r(2),P(t.collection().isPublic?"Make private":"Make public"))},dependencies:[L,z,R,N,V,y,x,w,U,G,A,K,B,j,q,J,H],styles:[".collection-card[_ngcontent-%COMP%]{min-width:250px;border:3px solid var(--background-color-steel);border-radius:var(--border-radius-medium);cursor:pointer;transition:transform .2s}.collection-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.collection-card[_ngcontent-%COMP%]   img[mat-card-image][_ngcontent-%COMP%]{height:150px;object-fit:cover;border-top-left-radius:var(--border-radius-medium);border-top-right-radius:var(--border-radius-medium)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-top:var(--spacing-xs)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .collection-details[_ngcontent-%COMP%]{width:calc(100% - 50px)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .collection-details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-size-h4);margin:var(--spacing-small) 0 var(--spacing-xs)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .collection-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.87rem;color:var(--text-color-additional);margin:0}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{margin-right:-10px}"]})};export{Q as a};
