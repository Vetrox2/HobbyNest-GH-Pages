import{c as I}from"./chunk-FDNU37EC.js";import{b as A,f as O,k as R,p as S}from"./chunk-OA2S7QIP.js";import{Ac as b,Ba as f,Bc as y,Cc as F,Fa as _,Ib as m,Nb as V,Sb as C,Sc as v,Xb as a,Yb as s,bc as u,ga as M,hb as p,jc as x,lc as o,qa as l,qc as h,ra as d,rb as k,rc as T,sc as E,wc as w,xc as g}from"./chunk-BNW6Q7MZ.js";var z=["inputField"],P=["inputArea"];function Q(i,n){if(i&1&&(a(0,"h1",3),w(1),s()),i&2){let e=o(2);V("title",e.text()),p(),g(e.text())}}function W(i,n){if(i&1){let e=u();a(0,"input",5,0),F("ngModelChange",function(t){l(e);let c=o(2);return y(c.editedText,t)||(c.editedText=t),d(t)}),x("blur",function(){l(e);let t=o(2);return d(t.confirmEdit())})("keydown.enter",function(){l(e);let t=o(2);return d(t.confirmEdit())})("click",function(t){return l(e),d(t.stopPropagation())}),s()}if(i&2){let e=o(2);b("ngModel",e.editedText)}}function D(i,n){if(i&1){let e=u();a(0,"div",2),x("click",function(){l(e);let t=o();return d(t.switchEditOnClickMode()?t.startEditing():null)}),m(1,Q,2,2,"h1",3)(2,W,2,1,"input",4),s()}if(i&2){let e=o();p(),C(e.isEditing()?2:1)}}function L(i,n){if(i&1&&(a(0,"p"),w(1),s()),i&2){let e=o(2);p(),g(e.text())}}function N(i,n){if(i&1){let e=u();a(0,"textarea",6,1),F("ngModelChange",function(t){l(e);let c=o(2);return y(c.editedText,t)||(c.editedText=t),d(t)}),x("blur",function(){l(e);let t=o(2);return d(t.confirmEdit())})("input",function(){l(e);let t=o(2);return d(t.onInput())})("keydown.enter",function(){l(e);let t=o(2);return d(t.confirmEdit())})("click",function(t){return l(e),d(t.stopPropagation())}),s()}if(i&2){let e=o(2);b("ngModel",e.editedText)}}function q(i,n){if(i&1){let e=u();a(0,"div",2),x("click",function(){l(e);let t=o();return d(t.switchEditOnClickMode()?t.startEditing():null)}),m(1,L,2,1,"p")(2,N,2,1,"textarea",4),s()}if(i&2){let e=o();p(),C(e.isEditing()?2:1)}}var H=class i{editStartOnClickMode=new f;editEnd=new f;inputField;inputArea;isHeader=_(!0);text=_();isEditing=_(!1);switchEditOnClickMode=_(!1);cdr=M(v);editedText="";isInputRendered=!1;resizeTimeout;startEditing(){this.editStartOnClickMode.emit()}confirmEdit(){this.isInputRendered=!1,this.editEnd.emit(this.editedText.trim())}onInput(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.inputArea&&this.autoResizeTextarea(this.inputArea.nativeElement)},50)}autoResizeTextarea(n){n.style.height="auto",n.style.height=n.scrollHeight+"px"}setCursorOnInputField(){if(!this.inputField&&!this.inputArea){console.error("The inputField has not been initialized.");return}let n=this.isHeader()?this.inputField.nativeElement:this.inputArea.nativeElement;n.focus();let e=n.value.length;n.setSelectionRange(e,e)}ngAfterViewChecked(){this.isEditing()&&!this.isInputRendered&&(this.inputField||this.inputArea)&&setTimeout(()=>{this.editedText=this.text()||"",this.isInputRendered=!0,this.setCursorOnInputField(),this.isHeader()||this.autoResizeTextarea(this.inputArea.nativeElement),this.cdr.detectChanges()})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=k({type:i,selectors:[["app-editable-text-field"]],viewQuery:function(e,r){if(e&1&&(h(z,5),h(P,5)),e&2){let t;T(t=E())&&(r.inputField=t.first),T(t=E())&&(r.inputArea=t.first)}},inputs:{isHeader:[1,"isHeader"],text:[1,"text"],isEditing:[1,"isEditing"],switchEditOnClickMode:[1,"switchEditOnClickMode"]},outputs:{editStartOnClickMode:"editStartOnClickMode",editEnd:"editEnd"},decls:2,vars:1,consts:[["inputField",""],["inputArea",""],[3,"click"],[1,"text",3,"title"],["type","text",1,"edit-input",3,"ngModel"],["type","text",1,"edit-input",3,"ngModelChange","blur","keydown.enter","click","ngModel"],["type","text",1,"edit-input",3,"ngModelChange","blur","input","keydown.enter","click","ngModel"]],template:function(e,r){e&1&&m(0,D,3,1,"div")(1,q,3,1,"div"),e&2&&C(r.isHeader()?0:1)},dependencies:[I,S,A,O,R],styles:["h1[_ngcontent-%COMP%]{font-size:inherit;margin:0}p[_ngcontent-%COMP%]{margin:0}.edit-input[_ngcontent-%COMP%]{display:flex;font-size:inherit;font-family:inherit;line-height:inherit;border:1px solid var(--background-color);width:100%;outline:none;border-radius:var(--border-radius-small)}.text[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block}"]})};export{H as a};
