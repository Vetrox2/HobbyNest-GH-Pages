import{c as le,d as re,f as ae}from"./chunk-VVT3QNTL.js";import{a as X}from"./chunk-YAYDWWTK.js";import{a as oe,b as ne}from"./chunk-GDRNNVVC.js";import{a as ve}from"./chunk-HMQCSNRP.js";import{a as Ce,b as he}from"./chunk-27F2HPJX.js";import{a as K}from"./chunk-YQJPCG5V.js";import"./chunk-IBJR7RAY.js";import"./chunk-J5ZUHJNU.js";import{p as ce,q as se,r as P,s as me,t as de,u as pe,v as ge,w as fe,z as ue}from"./chunk-RZNO32K5.js";import"./chunk-4RTAQCRI.js";import{a as y,b as S}from"./chunk-JUB4HLJK.js";import{a as Z,c as ee,g as te,i as ie}from"./chunk-GI253YVA.js";import{b as O,e as w,r as Y,s as J}from"./chunk-F6BCK6HS.js";import"./chunk-HVWCVND4.js";import{t as q}from"./chunk-66SFJMCG.js";import{$b as p,D as N,Fb as $,Hb as s,Jb as k,Kc as I,Mb as M,Ob as f,Pb as u,Qb as o,Rb as l,Sb as d,Wb as x,bb as E,bc as C,cc as W,dc as j,fb as r,gc as H,hc as A,ia as m,ic as F,mc as c,nc as b,ob as g,oc as G,ra as v,sa as _,xc as Q,z as L,zc as U}from"./chunk-7IX7LMTZ.js";var ye=["scrollContainer"],Se=["scrollWrapper"],xe=["*"],D=class t{scrollContainer;scrollWrapper;canScrollLeft=!1;canScrollRight=!1;scrollButtonVisible=!1;scrollSub;resizeObserver;ngAfterViewInit(){this.updateScrollButtons(),this.scrollSub=L(this.scrollContainer.nativeElement,"scroll").pipe(N(100)).subscribe(()=>this.updateScrollButtons()),this.resizeObserver=new ResizeObserver(()=>{this.onScrollContainerResized()}),this.resizeObserver.observe(this.scrollContainer.nativeElement)}ngOnDestroy(){this.scrollSub?.unsubscribe(),this.resizeObserver.disconnect()}onScrollContainerResized(){this.updateScrollButtons()}scrollLeft(){this.scrollContainer.nativeElement.scrollBy({left:-300,behavior:"smooth"}),setTimeout(()=>this.updateScrollButtons(),300)}scrollRight(){this.scrollContainer.nativeElement.scrollBy({left:300,behavior:"smooth"}),setTimeout(()=>this.updateScrollButtons(),300)}updateScrollButtons(){this.scrollButtonVisible=this.scrollContainer.nativeElement.clientWidth===this.scrollWrapper.nativeElement.clientWidth;let i=this.scrollContainer.nativeElement;this.canScrollLeft=i.scrollLeft>0,this.canScrollRight=i.scrollLeft<i.scrollWidth-i.clientWidth}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-horizontal-scroll"]],viewQuery:function(e,n){if(e&1&&(H(ye,7),H(Se,7)),e&2){let a;A(a=F())&&(n.scrollContainer=a.first),A(a=F())&&(n.scrollWrapper=a.first)}},ngContentSelectors:xe,decls:11,vars:6,consts:[["scrollWrapper",""],["scrollContainer",""],[1,"scroll-wrapper"],[1,"scroll-btn","left",3,"click","disabled"],[1,"scroll-container",3,"scroll"],[1,"scroll-btn","right",3,"click","disabled"]],template:function(e,n){if(e&1){let a=x();W(),o(0,"div",2,0)(2,"button",3),p("click",function(){return v(a),_(n.scrollLeft())}),o(3,"mat-icon"),c(4,"keyboard_arrow_left"),l()(),o(5,"div",4,1),p("scroll",function(){return v(a),_(n.updateScrollButtons())}),j(7),l(),o(8,"button",5),p("click",function(){return v(a),_(n.scrollRight())}),o(9,"mat-icon"),c(10,"keyboard_arrow_right"),l()()()}e&2&&(r(2),k("hidden",!n.scrollButtonVisible),s("disabled",!n.canScrollLeft),r(6),k("hidden",!n.scrollButtonVisible),s("disabled",!n.canScrollRight))},dependencies:[S,y],styles:[".scroll-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;overflow:hidden;width:100%}.scroll-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;overflow-x:hidden;scroll-behavior:smooth;gap:var(--spacing-medium);padding:var(--spacing-medium) 0;width:fit-content}.scroll-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);z-index:1;background-color:#000000e6;color:#fff;border:none;padding:var(--spacing-small) var(--spacing-medium);font-size:var(--font-size-base);border-radius:var(--border-radius-large);cursor:pointer;transition:opacity .2s ease-in-out}.scroll-btn.left[_ngcontent-%COMP%]{left:var(--spacing-small)}.scroll-btn.right[_ngcontent-%COMP%]{right:var(--spacing-small)}.scroll-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:default}.scroll-btn.hidden[_ngcontent-%COMP%]{opacity:0;pointer-events:none}"]})};var Oe=(t,i)=>i.id;function we(t,i){if(t&1){let e=x();o(0,"mat-list-item",7),p("click",function(){let a=v(e).$implicit,h=C();return _(h.select(a))}),o(1,"div",8)(2,"h4",9),c(3),l(),o(4,"p",10),c(5),l()()()}if(t&2){let e=i.$implicit;r(3),b(e.name),r(2),G("",e.itemCount," items")}}var z=class t{collectionService=m(J);dialog=m(P);data=m(se);dialogRef=m(ce);category;collections=I(()=>this.collectionService.selfCollections().filter(i=>i.category===this.category));add(){var i=this.dialog.open(ve,{width:"550px",data:{collectionCategory:this.category}});i.afterClosed().subscribe(e=>{e&&typeof e==typeof Ce&&this.select(e)})}select(i){this.dialogRef.close(i)}ngOnInit(){this.category=this.data.category}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-choose-collection-dialog"]],decls:16,vars:0,consts:[["mat-dialog-title",""],[1,"dialog-content"],[1,"add-collection-header",3,"click"],[1,"list-container"],[1,"collection-item"],["align","end"],["mat-flat-button","","mat-dialog-close",""],[1,"collection-item",3,"click"],[1,"collection-info"],[1,"collection-name"],[1,"collection-count"]],template:function(e,n){e&1&&(o(0,"h3",0),c(1,"Add to watchlist"),l(),o(2,"mat-dialog-content",1)(3,"div",2),p("click",function(){return n.add()}),o(4,"mat-icon"),c(5,"add"),l(),c(6," Add New Collection "),l(),d(7,"mat-divider"),o(8,"div",3)(9,"mat-list"),f(10,we,6,2,"mat-list-item",4,Oe),l()(),d(12,"mat-divider"),l(),o(13,"mat-dialog-actions",5)(14,"button",6),c(15,"Cancel"),l()()),e&2&&(r(10),u(n.collections()))},dependencies:[fe,me,de,ge,pe,ae,le,re,oe,w,O,S,y,ne],styles:[".mat-mdc-dialog-title[_ngcontent-%COMP%]{margin-top:var(--spacing-small);margin-bottom:var(--spacing-small);font-size:var(--font-size-h3)!important;text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-small)}.add-collection-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-small);cursor:pointer;font-size:var(--font-size-base);color:var(--text-color);padding:var(--spacing-small);border-radius:var(--border-radius-small)}.add-collection-header[_ngcontent-%COMP%]:hover{background-color:var(--background-color-light-hover)}.list-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.collection-item[_ngcontent-%COMP%]{cursor:pointer;border-radius:var(--border-radius-small);height:fit-content}.collection-item[_ngcontent-%COMP%]:hover{background-color:var(--background-color-light-hover)}.collection-item[_ngcontent-%COMP%]   .collection-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:var(--spacing-small) 0;gap:var(--spacing-xs)}.collection-item[_ngcontent-%COMP%]   .collection-name[_ngcontent-%COMP%]{margin:0;font-size:var(--font-size-base);line-height:var(--font-size-base);font-weight:var(--font-weight-normal);color:var(--text-color)}.collection-item[_ngcontent-%COMP%]   .collection-count[_ngcontent-%COMP%]{margin:0;font-size:var(--font-size-small);line-height:var(--font-size-small);color:var(--text-color-grey)}mat-dialog-actions[_ngcontent-%COMP%]{padding:0 var(--spacing-large) var(--spacing-medium)}"]})};var T=class t{mediaItem;dialog=m(P);notificationService=m(Y);collectionItemsService=m(K);openCollectionsDialog(){var i=this.dialog.open(z,{width:"400px",minHeight:"300px",maxHeight:"700px",data:{category:this.mediaItem.category}});i.afterClosed().subscribe(e=>{if(e){var n={mediaItemApiId:this.mediaItem.itemApiId,collectionId:e.id,toDo:!0,rating:0};this.collectionItemsService.addMediaItem(n).subscribe({next:a=>this.notificationService.showSuccess(),error:a=>{let h=a instanceof Error?a.message:typeof a=="string"?a:void 0;this.notificationService.showFailure(h)}})}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-media-item-tile"]],inputs:{mediaItem:"mediaItem"},decls:14,vars:9,consts:[[1,"tile"],["target","_blank",1,"link",3,"href"],["mat-card-image","","appImgFallback","media-item-placeholder.png","height","250","width","194","alt","Collection image","draggable","false",3,"src"],[1,"tile-content"],[3,"title"],["mat-flat-button","",1,"add-btn",3,"click"]],template:function(e,n){if(e&1&&(o(0,"mat-card",0)(1,"a",1),d(2,"img",2),o(3,"mat-card-content",3)(4,"h3",4),c(5),l(),o(6,"p"),c(7),l(),o(8,"p"),c(9),Q(10,"date"),l()()(),o(11,"button",5),p("click",function(){return n.openCollectionsDialog()}),o(12,"mat-icon"),c(13,"add"),l()()()),e&2){let a;r(),s("href",n.mediaItem.sourceUrl,E),r(),s("src",(a=n.mediaItem.imageUrl)!==null&&a!==void 0?a:"media-item-placeholder.png",E),r(2),s("title",n.mediaItem.title),r(),b(n.mediaItem.title),r(2),b(n.mediaItem.genre),r(2),b(U(10,6,n.mediaItem.releaseDate,"yyyy"))}},dependencies:[ie,Z,ee,te,q,w,O,S,y,ue],styles:[".link[_ngcontent-%COMP%]{text-decoration:none}.tile[_ngcontent-%COMP%]{width:200px;min-height:300px;max-height:450px;border:3px solid var(--background-color-steel);border-radius:var(--border-radius-medium);cursor:pointer;transition:transform .2s}.tile[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.tile[_ngcontent-%COMP%]   img[mat-card-image][_ngcontent-%COMP%]{object-fit:cover;border-top-left-radius:var(--border-radius-medium);border-top-right-radius:var(--border-radius-medium)}.tile[_ngcontent-%COMP%]   .tile-content[_ngcontent-%COMP%]{margin-top:var(--spacing-small)}.tile[_ngcontent-%COMP%]   .tile-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block;font-size:var(--font-size-h4);color:var(--text-color);margin:var(--spacing-small) 0 var(--spacing-xs)}.tile[_ngcontent-%COMP%]   .tile-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block;font-size:var(--font-size-additional);color:var(--text-color-grey);margin:0}.add-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:64px;height:64px;background-color:var(--background-color-dark)!important;border-radius:0 var(--border-radius-medium) 0 var(--border-radius-medium);opacity:.6;transition:opacity .3s ease}.add-btn[_ngcontent-%COMP%]:hover{opacity:.9}.add-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;margin:0}"]})};var be=(t,i)=>i.id,V=(t,i)=>i.itemApiId;function Pe(t,i){if(t&1&&d(0,"app-collection-tile",1),t&2){let e=i.$implicit;s("collection",e)}}function De(t,i){if(t&1&&(o(0,"section")(1,"h2"),c(2,"Recently Modified by You"),l(),o(3,"app-horizontal-scroll"),f(4,Pe,1,1,"app-collection-tile",1,be),l()()),t&2){let e=C();r(4),u(e.recentModifiedCollections())}}function ze(t,i){if(t&1&&d(0,"app-media-item-tile",2),t&2){let e=i.$implicit;s("mediaItem",e)}}function Te(t,i){if(t&1&&(o(0,"section")(1,"h2"),c(2,"Trending Among Friends"),l(),o(3,"app-horizontal-scroll"),f(4,ze,1,1,"app-media-item-tile",2,be),l()()),t&2){let e=C();r(4),u(e.trendingAmongFriends())}}function Ee(t,i){if(t&1&&d(0,"app-media-item-tile",2),t&2){let e=i.$implicit;s("mediaItem",e)}}function ke(t,i){if(t&1&&(o(0,"section")(1,"h2"),c(2,"Trending Now: Movies"),l(),o(3,"app-horizontal-scroll"),f(4,Ee,1,1,"app-media-item-tile",2,V),l()()),t&2){let e=C();r(4),u(e.trendingMovies())}}function He(t,i){if(t&1&&d(0,"app-media-item-tile",2),t&2){let e=i.$implicit;s("mediaItem",e)}}function Ae(t,i){if(t&1&&(o(0,"section")(1,"h2"),c(2,"Trending Now: Series"),l(),o(3,"app-horizontal-scroll"),f(4,He,1,1,"app-media-item-tile",2,V),l()()),t&2){let e=C();r(4),u(e.trendingSeries())}}function Fe(t,i){if(t&1&&d(0,"app-media-item-tile",2),t&2){let e=i.$implicit;s("mediaItem",e)}}function Be(t,i){if(t&1&&(o(0,"section")(1,"h2"),c(2,"Trending Now: Games"),l(),o(3,"app-horizontal-scroll"),f(4,Fe,1,1,"app-media-item-tile",2,V),l()()),t&2){let e=C();r(4),u(e.trendingGames())}}var Me=class t{homeService=m(X);recentModifiedCollections=I(()=>this.homeService.recentModifiedCollections().slice(0,10));trendingAmongFriends=this.homeService.trendingAmongFriends;trendingMovies=this.homeService.trendingMovies;trendingGames=this.homeService.trendingGames;trendingSeries=this.homeService.trendingSeries;ngOnInit(){this.homeService.fetchData()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-home"]],decls:6,vars:5,consts:[[1,"main-container"],[1,"collection-tile",3,"collection"],[3,"mediaItem"]],template:function(e,n){e&1&&(o(0,"div",0),$(1,De,6,0,"section")(2,Te,6,0,"section")(3,ke,6,0,"section")(4,Ae,6,0,"section")(5,Be,6,0,"section"),l()),e&2&&(r(),M(n.recentModifiedCollections().length>0?1:-1),r(),M(n.trendingAmongFriends().length>0?2:-1),r(),M(n.trendingMovies().length>0?3:-1),r(),M(n.trendingSeries().length>0?4:-1),r(),M(n.trendingGames().length>0?5:-1))},dependencies:[D,he,T],styles:[".main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xxl)}.main-container[_ngcontent-%COMP%]   .collection-tile[_ngcontent-%COMP%]{width:250px}"]})};export{Me as HomeComponent};
