import{a as W}from"./chunk-J7XLSKBM.js";import{a as Y,b as A,c as H,d as J,e as K}from"./chunk-NZOIZJP2.js";import{f as F}from"./chunk-3OMDW2B2.js";import{a as N}from"./chunk-5TLHWZXQ.js";import{a as Q}from"./chunk-6YTSYAD3.js";import{p as U}from"./chunk-RMJXZBAS.js";import{a as q,b as G}from"./chunk-3354VIHL.js";import{a as j,c as B,g as L,i as $}from"./chunk-BQHFBY6P.js";import{e as D,f as z,r as R}from"./chunk-4JQI7GWC.js";import{s as V}from"./chunk-R5CXRUDK.js";import{Bc as y,Cc as r,Dc as g,Fc as b,H as C,Jb as S,Ka as P,Lc as w,Ob as h,Tb as u,Yb as v,bc as i,cc as l,cd as I,dc as O,ec as k,fc as E,hc as x,jb as M,ma as f,nb as o,p as _,pc as p,rc as s,wa as m,xa as d,xb as T}from"./chunk-YUWHBJVV.js";var ee=n=>["/collections",n];function te(n,c){if(n&1&&(i(0,"p"),r(1),l()),n&2){let e=s().$implicit,t=s();o(),b(" ",e("collection.collectionTile.status"),": ",t.collection().isPublic?e("collection.collectionTile.public"):e("collection.collectionTile.private")," ")}}function ie(n,c){if(n&1){let e=x();i(0,"button",9),p("click",function(a){return m(e),d(a.stopPropagation())}),i(1,"mat-icon"),r(2,"more_horiz"),l()()}if(n&2){s();let e=y(14);u("matMenuTriggerFor",e)}}function ne(n,c){if(n&1){let e=x();k(0),i(1,"mat-card",2),O(2,"img",3),i(3,"mat-card-content",4)(4,"div",5)(5,"h1")(6,"app-editable-text-field",6),p("editEnd",function(a){m(e);let Z=s();return d(Z.confirmRename(a))}),l()(),i(7,"p"),r(8),l(),h(9,te,2,2,"p"),i(10,"p"),r(11),l()(),h(12,ie,3,1,"button",7),i(13,"mat-menu",null,0)(15,"button",8),p("click",function(){m(e);let a=s();return d(a.onRename())}),i(16,"mat-icon"),r(17,"edit"),l(),i(18,"span"),r(19),l()(),i(20,"button",8),p("click",function(){m(e);let a=s();return d(a.onPublicStatusChange())}),i(21,"mat-icon"),r(22),l(),i(23,"span"),r(24),l()(),i(25,"button",8),p("click",function(){m(e);let a=s();return d(a.onDelete())}),i(26,"mat-icon"),r(27,"delete"),l(),i(28,"span"),r(29),l()()()()(),E()}if(n&2){let e=c.$implicit,t=s();o(),u("routerLink",w(14,ee,t.collection().id)),o(),u("src",t.tileImage(),M),o(4),u("text",t.collection().name)("isEditing",t.isEditing()),o(2),b("",e("collection.collectionTile.category"),": ",e("collection.category."+t.collection().category),""),o(),v(t.isOnCollectionPage?9:-1),o(2),b("",e("collection.collectionTile.items"),": ",t.collection().itemCount,""),o(),v(t.isOnCollectionPage?12:-1),o(7),g(e("button.rename")),o(3),g(t.collection().isPublic?"lock":"lock_open"),o(2),g(t.collection().isPublic?e("collection.makePrivate"):e("collection.makePublic")),o(5),g(e("button.delete"))}}var X=class n{isOnCollectionPage=!1;collection=P.required();collectionService=f(N);notificationService=f(R);dialogService=f(K);movieTilePlaceholder="movie-tile-placeholder.png";seriesTilePlaceholder="series-tile-placeholder.png";gameTilePlaceholder="game-tile-placeholder.png";bookTilePlaceholder="book-tile-placeholder.png";customTilePlaceholder="custom-tile-placeholder.png";tileImage=I(()=>{switch(this.collection().category){case"series":return this.seriesTilePlaceholder;case"movie":return this.movieTilePlaceholder;case"game":return this.gameTilePlaceholder;case"book":return this.bookTilePlaceholder;case"custom":return this.customTilePlaceholder;default:return this.customTilePlaceholder}});isEditing=S(!1);onPublicStatusChange(){this.collection().isPublic?this.togglePublicStatus():this.dialogService.openConfirmChangeCollectionStatusToPublicDialog().subscribe(c=>{c&&this.togglePublicStatus()})}onRename(){this.isEditing.set(!0)}confirmRename(c){this.collectionService.updateCollectionName(this.collection().id,c,this.collection().name).pipe(C(()=>(this.notificationService.showFailure(),_))).subscribe(),this.isEditing.set(!1)}onDelete(){this.dialogService.openConfirmDeleteDialog(this.collection().name).subscribe(c=>{c&&this.collectionService.deleteCollection(this.collection().id).pipe(C(()=>(this.notificationService.showFailure(),_))).subscribe()})}togglePublicStatus(){this.collectionService.updateCollectionPublicStatus(this.collection().id,!this.collection().isPublic).pipe(C(()=>(this.notificationService.showFailure(),_))).subscribe()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=T({type:n,selectors:[["app-collection-tile"]],inputs:{isOnCollectionPage:"isOnCollectionPage",collection:[1,"collection"]},decls:1,vars:0,consts:[["menu","matMenu"],[4,"transloco"],[1,"collection-card",3,"routerLink"],["mat-card-image","","appImgFallback","movie-tile-placeholder.png","alt","Collection image","draggable","false",3,"src"],[1,"collection-card-content"],[1,"collection-details"],[3,"editEnd","text","isEditing"],["mat-icon-button","",1,"menu-button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-icon-button","",1,"menu-button",3,"click","matMenuTriggerFor"]],template:function(e,t){e&1&&h(0,ne,30,16,"ng-container",1)},dependencies:[$,j,B,L,z,D,F,J,A,Y,H,G,q,U,W,Q,V],styles:[".collection-card[_ngcontent-%COMP%]{min-width:250px;border:3px solid var(--background-color-steel);border-radius:var(--border-radius-medium);cursor:pointer;transition:transform .2s}.collection-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.collection-card[_ngcontent-%COMP%]   img[mat-card-image][_ngcontent-%COMP%]{height:150px;object-fit:cover;border-top-left-radius:var(--border-radius-medium);border-top-right-radius:var(--border-radius-medium)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-top:var(--spacing-xs)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .collection-details[_ngcontent-%COMP%]{width:calc(100% - 50px)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .collection-details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-size-h4);margin:var(--spacing-small) 0 var(--spacing-xs)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .collection-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.87rem;color:var(--text-color-additional);margin:0}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{margin-right:-10px}"]})};export{X as a};
