import{a as H}from"./chunk-3RNCWNF7.js";import{l as q,m as A,n as K,o as U,w as Y}from"./chunk-32NLWDRR.js";import{p as G}from"./chunk-4QVHTKOU.js";import{a as L,b as j}from"./chunk-THLBEF7B.js";import{a as z,c as R,g as N,i as B}from"./chunk-O63GIMFI.js";import{d as y,e as V,r as D,s as F}from"./chunk-6S5I5LFA.js";import{m as w}from"./chunk-52EUMQZR.js";import{m as E}from"./chunk-XPGUH72Q.js";import{$b as u,Ab as k,E as f,Ea as P,Fb as b,Hb as s,Qb as e,Rb as i,Sb as O,Wb as _,bb as S,bc as v,fb as r,ia as h,lc as I,m as g,mc as n,nc as M,ob as T,oc as C,ra as d,sa as p,vc as x}from"./chunk-TIIQBU2L.js";var J=(a=>(a.Movie="movie",a.Series="series",a.Game="game",a.Book="book",a.Custom="custom",a))(J||{});var X=o=>["/collections",o];function Z(o,c){if(o&1&&(e(0,"p"),n(1),i()),o&2){let l=v();r(),C("Status: ",l.collection().isPublic?"Publiczna":"Prywatna","")}}function $(o,c){if(o&1){let l=_();e(0,"button",9),u("click",function(m){return d(l),p(m.stopPropagation())}),e(1,"mat-icon"),n(2,"more_horiz"),i()()}if(o&2){v();let l=I(13);s("matMenuTriggerFor",l)}}var Q=class o{isOnCollectionPage=!1;collection=P.required();collectionService=h(F);notificationService=h(D);dialogService=h(Y);movieTilePlaceholder="movie-tile-placeholder.png";seriesTilePlaceholder="series-tile-placeholder.png";gameTilePlaceholder="game-tile-placeholder.png";bookTilePlaceholder="book-tile-placeholder.png";customTilePlaceholder="custom-tile-placeholder.png";tileImage="";isEditing=k(!1);onPublicStatusChange(){this.collection().isPublic?this.togglePublicStatus():this.dialogService.openConfirmChangeCollectionStatusToPublicDialog().subscribe(c=>{c&&this.togglePublicStatus()})}onRename(){this.isEditing.set(!0)}confirmRename(c){this.collectionService.updateCollectionName(this.collection().id,c,this.collection().name).pipe(f(()=>(this.notificationService.showFailure(),g))).subscribe(),this.isEditing.set(!1)}onDelete(){this.dialogService.openConfirmDeleteDialog(this.collection().name).subscribe(c=>{c&&this.collectionService.deleteCollection(this.collection().id).pipe(f(()=>(this.notificationService.showFailure(),g))).subscribe()})}togglePublicStatus(){this.collectionService.updateCollectionPublicStatus(this.collection().id,!this.collection().isPublic).pipe(f(()=>(this.notificationService.showFailure(),g))).subscribe()}ngOnInit(){switch(this.collection().category){case"series":this.tileImage=this.seriesTilePlaceholder;break;case"movie":this.tileImage=this.movieTilePlaceholder;break;case"game":this.tileImage=this.gameTilePlaceholder;break;case"book":this.tileImage=this.bookTilePlaceholder;break;case"custom":this.tileImage=this.customTilePlaceholder;break;default:this.tileImage=this.customTilePlaceholder}}static \u0275fac=function(l){return new(l||o)};static \u0275cmp=T({type:o,selectors:[["app-collection-tile"]],inputs:{isOnCollectionPage:"isOnCollectionPage",collection:[1,"collection"]},decls:29,vars:12,consts:[["menu","matMenu"],[1,"collection-card",3,"routerLink"],["mat-card-image","","alt","Collection image","draggable","false",3,"src"],[1,"collection-card-content"],[1,"collection-details"],[3,"editEnd","text","isEditing"],[4,"ngIf"],["mat-icon-button","","class","menu-button",3,"matMenuTriggerFor","click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-icon-button","",1,"menu-button",3,"click","matMenuTriggerFor"]],template:function(l,t){if(l&1){let m=_();e(0,"mat-card",1),O(1,"img",2),e(2,"mat-card-content",3)(3,"div",4)(4,"h1")(5,"app-editable-text-field",5),u("editEnd",function(W){return d(m),p(t.confirmRename(W))}),i()(),e(6,"p"),n(7),i(),b(8,Z,2,1,"p",6),e(9,"p"),n(10),i()(),b(11,$,3,1,"button",7),e(12,"mat-menu",null,0)(14,"button",8),u("click",function(){return d(m),p(t.onRename())}),e(15,"mat-icon"),n(16,"edit"),i(),e(17,"span"),n(18,"Rename"),i()(),e(19,"button",8),u("click",function(){return d(m),p(t.onPublicStatusChange())}),e(20,"mat-icon"),n(21),i(),e(22,"span"),n(23),i()(),e(24,"button",8),u("click",function(){return d(m),p(t.onDelete())}),e(25,"mat-icon"),n(26,"delete"),i(),e(27,"span"),n(28,"Delete"),i()()()()()}l&2&&(s("routerLink",x(10,X,t.collection().id)),r(),s("src",t.tileImage,S),r(4),s("text",t.collection().name)("isEditing",t.isEditing()),r(2),C("Kategoria: ",t.collection().category,""),r(),s("ngIf",t.isOnCollectionPage),r(2),C("Liczba element\xF3w: ",t.collection().itemCount,""),r(),s("ngIf",t.isOnCollectionPage),r(10),M(t.collection().isPublic?"lock":"lock_open"),r(2),M(t.collection().isPublic?"Make private":"Make public"))},dependencies:[B,z,R,N,V,y,w,E,U,A,q,K,j,L,G,H],styles:[".collection-card[_ngcontent-%COMP%]{min-width:250px;border:3px solid var(--background-color-steel);border-radius:var(--border-radius-medium);cursor:pointer;transition:transform .2s}.collection-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.collection-card[_ngcontent-%COMP%]   img[mat-card-image][_ngcontent-%COMP%]{height:150px;object-fit:cover;border-top-left-radius:var(--border-radius-medium);border-top-right-radius:var(--border-radius-medium)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-top:var(--spacing-xs)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .collection-details[_ngcontent-%COMP%]{width:calc(100% - 50px)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .collection-details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-size-h4);margin:var(--spacing-small) 0 var(--spacing-xs)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .collection-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.87rem;color:var(--text-color-additional);margin:0}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{margin-right:-10px}"]})};export{J as a,Q as b};
