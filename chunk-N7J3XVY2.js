import{a as p}from"./chunk-EQNPCEY6.js";import{a as c}from"./chunk-EP6N3N6R.js";import{s as a}from"./chunk-WJTMIWFM.js";import{Z as m,ba as s,ha as i,j as n,m as o}from"./chunk-S4ZUGAIY.js";var I={done:"done",inProgress:"in_progress",todo:"todo"};var d=class r{apiService=i(c);collectionService=i(p);translation=i(a);collectionItemEndpoint="collectionitem";getCollectionItemId(e,t){return this.apiService.get(`${this.collectionItemEndpoint}/${e}/${t}`)}addMediaItem(e){return this.apiService.post(this.collectionItemEndpoint+"/media",e).pipe(m(()=>{this.collectionService.increaseCollectionItemsCount(e.collectionId)}))}addCustomItem(e){return this.apiService.post(this.collectionItemEndpoint+"/custom",e).pipe(m(()=>{this.collectionService.increaseCollectionItemsCount(e.collectionId)}))}updateCustomItem(e){return this.apiService.patch(this.collectionItemEndpoint+"/custom",e)}updateCustomItemTitle(e,t){if(t=t.trim(),!e.item)return o(()=>new Error(this.translation.translate("error.base")));if(t===e.item.title)return n;if(!t||t.length>100)return o(()=>new Error(`${this.translation.translate("error.lengthError",{value:100})} ${this.translation.translate("error.notEmpty")}`));let l={id:e.id,title:t,description:e.item.description||""};return this.apiService.patch(this.collectionItemEndpoint+"/custom",l)}updateCustomItemDescription(e,t){if(t=t.trim(),!e.item)return o(()=>new Error(this.translation.translate("error.base")));if(t===e.item.description)return n;if(t&&t.length>2e3)return o(()=>new Error(this.translation.translate("error.lengthError",{value:2e3})));let l={id:e.id,title:e.item.title,description:t};return this.apiService.patch(this.collectionItemEndpoint+"/custom",l)}updateItemRating(e){return this.apiService.patch(this.collectionItemEndpoint+"/rating",e)}addSeasonCollectionItem(e){return this.apiService.post(this.collectionItemEndpoint+"/media/season",e)}addEpisodeCollectionItem(e){return this.apiService.post(this.collectionItemEndpoint+"/media/episode",e)}updateItemStatus(e){return this.apiService.patch(this.collectionItemEndpoint+"/status",e)}deleteItem(e){return this.apiService.delete(this.collectionItemEndpoint,e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"})};export{I as a,d as b};
