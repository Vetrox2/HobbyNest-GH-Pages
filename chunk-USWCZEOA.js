import{a as j}from"./chunk-EDJLDPGU.js";import{a as q,b as N}from"./chunk-FIQT4NFQ.js";import{a as R}from"./chunk-65KQNILW.js";import{k as D}from"./chunk-EP6N3N6R.js";import{a as I,e as y}from"./chunk-DVBFJ42S.js";import{a as V,b as E}from"./chunk-7BMWJ5CI.js";import{a as U,b as L,j as W}from"./chunk-OHR2EENK.js";import{g as T}from"./chunk-5U3IDM62.js";import{t as A}from"./chunk-WJTMIWFM.js";import{Y as M}from"./chunk-YVXMD3G7.js";import{$b as s,Ac as l,Bc as h,Cc as f,Ga as g,Jc as P,Lb as v,Qb as p,Rb as k,Vb as S,_b as c,ac as O,ad as b,ec as x,fb as B,ha as C,ib as a,mc as _,oc as o,ra as d,sa as m,sb as F}from"./chunk-S4ZUGAIY.js";function H(n,r){if(n&1){let t=x();c(0,"button",4),_("click",function(i){d(t);let u=o(2);return m(u.deleteFriend(i))})("mouseenter",function(){d(t);let i=o(2);return m(i.hoverAddFriendButton=!0)})("mouseleave",function(){d(t);let i=o(2);return m(i.hoverAddFriendButton=!1)}),c(1,"mat-icon"),l(2),s(),l(3),s()}if(n&2){let t=o().$implicit,e=o();a(2),h(e.hoverAddFriendButton?"person_remove":"how_to_reg"),a(),f(" ",e.actionButtonsSmall()?"":e.hoverAddFriendButton?t("friend.actions.deleteFriend"):t("friend.actions.friends")," ")}}function J(n,r){if(n&1){let t=x();c(0,"button",4),_("click",function(i){d(t);let u=o(2);return m(u.deleteFriend(i))})("mouseenter",function(){d(t);let i=o(2);return m(i.hoverAddFriendButton=!0)})("mouseleave",function(){d(t);let i=o(2);return m(i.hoverAddFriendButton=!1)}),c(1,"mat-icon"),l(2),s(),l(3),s()}if(n&2){let t=o().$implicit,e=o();a(2),h(e.hoverAddFriendButton?"person_remove":"hourglass_empty"),a(),f(" ",e.actionButtonsSmall()?"":e.hoverAddFriendButton?t("friend.actions.cancelRequest"):t("friend.actions.requestSent")," ")}}function K(n,r){if(n&1){let t=x();c(0,"button",5),_("click",function(i){d(t);let u=o(2);return m(u.acceptFriendRequest(i))}),c(1,"mat-icon"),l(2,"done"),s(),l(3),s(),c(4,"button",6),_("click",function(i){d(t);let u=o(2);return m(u.deleteFriend(i))}),c(5,"mat-icon"),l(6,"close"),s(),l(7),s()}if(n&2){let t=o().$implicit,e=o();a(3),f(" ",e.actionButtonsSmall()?"":t("friend.actions.accept")," "),a(4),f(" ",e.actionButtonsSmall()?"":t("friend.actions.decline")," ")}}function Q(n,r){if(n&1){let t=x();c(0,"button",5),_("click",function(i){d(t);let u=o(2);return m(u.addFriend(i))}),c(1,"mat-icon"),l(2,"person_add"),s(),l(3),s()}if(n&2){let t=o().$implicit,e=o();a(3),f(" ",e.actionButtonsSmall()?"":t("friend.actions.addFriend")," ")}}function Y(n,r){if(n&1&&(c(0,"div",1),v(1,H,4,2,"button",2)(2,J,4,2,"button",2)(3,K,8,2)(4,Q,4,1,"button",3),s()),n&2){let t,e=o();p("ngClass",e.actionButtonsSmall()?"smallButton":""),a(),S((t=e.relationStatus())===e.friendStatus.Accepted?1:t===e.friendStatus.Sent?2:t===e.friendStatus.Received?3:4)}}var w=class n{actionButtonsSmall=g(!1);userId=g(0);friendService=C(N);dialogService=C(D);friendStatus=q;friend=b(()=>this.friendService.selfFriends()?.find(r=>this.userId()===r.id));relationStatus=b(()=>this.friend()?.status??"");hoverAddFriendButton=!1;addFriend(r){r.stopPropagation(),this.friendService.sendFriendRequest(this.userId())}acceptFriendRequest(r){r.stopPropagation(),this.friendService.acceptFriendRequest(this.userId())}deleteFriend(r){r.stopPropagation(),this.dialogService.openConfirmDeleteDialog(this.friend()?.username??"").subscribe(t=>{t&&this.friendService.deleteFriend(this.userId())})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=F({type:n,selectors:[["app-friend-actions"]],inputs:{actionButtonsSmall:[1,"actionButtonsSmall"],userId:[1,"userId"]},decls:1,vars:0,consts:[["class","friend-button-container",3,"ngClass",4,"transloco"],[1,"friend-button-container",3,"ngClass"],["mat-stroked-button","",1,"button-with-cancel"],["mat-stroked-button",""],["mat-stroked-button","",1,"button-with-cancel",3,"click","mouseenter","mouseleave"],["mat-stroked-button","",3,"click"],["mat-stroked-button","",1,"decline",3,"click"]],template:function(t,e){t&1&&v(0,Y,5,2,"div",0)},dependencies:[y,I,E,V,M,A],styles:[".friend-button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:var(--spacing-small);width:fit-content}.friend-button-container[_ngcontent-%COMP%]   .decline[_ngcontent-%COMP%]{background-color:var(--danger-color);transition:background-color .2s,color .2s}.friend-button-container[_ngcontent-%COMP%]   .decline[_ngcontent-%COMP%]:hover{background-color:var(--danger-color-hover)}.friend-button-container[_ngcontent-%COMP%]   .button-with-cancel[_ngcontent-%COMP%]{transition:background-color .3s,color .3s}.friend-button-container[_ngcontent-%COMP%]   .button-with-cancel[_ngcontent-%COMP%]:hover{background-color:var(--danger-color-hover)}.smallButton[_ngcontent-%COMP%]{gap:0px}.smallButton[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0;transform:scaleX(1.6666666667)}.smallButton[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transform:scaleX(.6);margin:0 -10px}"]})};var $=n=>["/profile",n];function Z(n,r){if(n&1&&(c(0,"div",4),O(1,"app-friend-actions",5),s()),n&2){let t=o();a(),p("userId",t.friend.id)("actionButtonsSmall",t.actionButtonsSmall)}}var z=class n{friend;actionButtonsOn=!0;actionButtonsSmall=!1;bgClass="";navigateOnWholeTile=g(!1);userService=C(R);amIThisUser=b(()=>this.userService.selfUser()?.id===this.friend.id);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=F({type:n,selectors:[["app-friend-tile"]],inputs:{friend:"friend",actionButtonsOn:"actionButtonsOn",actionButtonsSmall:"actionButtonsSmall",bgClass:"bgClass",navigateOnWholeTile:[1,"navigateOnWholeTile"]},decls:7,vars:12,consts:[[3,"ngClass"],[1,"content",3,"routerLink"],[1,"left-container",3,"routerLink"],["appImgFallback","user-avatar.png","alt","avatar","draggable","false",3,"src"],[1,"right-container"],[3,"userId","actionButtonsSmall"]],template:function(t,e){if(t&1&&(c(0,"mat-card",0)(1,"div",1)(2,"div",2),O(3,"img",3),c(4,"mat-card-title"),l(5),s()(),v(6,Z,2,2,"div",4),s()()),t&2){let i;p("ngClass",e.bgClass),a(),k("cursor",e.navigateOnWholeTile()?"pointer":"default"),p("routerLink",e.navigateOnWholeTile()?P(8,$,e.friend.id):void 0),a(),p("routerLink",P(10,$,e.friend.id)),a(),p("src",(i=e.friend.profilePictureUrl)!==null&&i!==void 0?i:"user-avatar.png",B),a(2),h(e.friend.username),a(),S(e.actionButtonsOn&&!e.amIThisUser()?6:-1)}},dependencies:[w,W,U,L,T,M,j],styles:[".transparent[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none}mat-card[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;min-width:min(250px,100%);max-width:100%;max-height:100%}mat-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row;height:100%;padding:0 clamp(var(--spacing-small),2.5%,var(--spacing-medium))}mat-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;cursor:pointer;height:100%;min-width:0;padding-right:var(--spacing-small)}mat-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:65%;aspect-ratio:1/1;object-fit:cover;border-radius:50%;margin:0}mat-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin-left:10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block}mat-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{font-size:80%}"]})};export{w as a,z as b};
