import{a as ye}from"./chunk-G53EOHRJ.js";import{d as Pe,e as N,f as b,g as j,h as xe,i as Ie,j as be,k as U}from"./chunk-37VZEYXA.js";import{c as ve,d as ue,f as Oe}from"./chunk-6QQD2BWC.js";import{a as Me,b as he}from"./chunk-EFUO5WB3.js";import{a as se}from"./chunk-HUJZVVKV.js";import{a as de}from"./chunk-QQTTX4SM.js";import{a as De}from"./chunk-XXWI5HUA.js";import{a as u,b as I}from"./chunk-6RI4EBCT.js";import{a as B,b as Ce,c as A,d as _e,f as $,g as fe,i as L}from"./chunk-CG2SNRMW.js";import{a as pe}from"./chunk-CK7GFSRL.js";import{b as v,c as R,f as x,s as me,t as ge}from"./chunk-GB5FS4AS.js";import{c as W,d as G,f as F,h as q}from"./chunk-HU7WFQWJ.js";import{Y as re,pa as ce}from"./chunk-KBHRRCXS.js";import{Db as ee,Fc as ae,Hc as z,Ib as M,Jc as T,Kb as te,Lb as ne,Nb as p,Sb as h,Vb as ie,Wb as oe,Xb as n,Xc as le,Yb as o,Zb as s,bc as S,ca as Y,cb as Z,db as O,hb as r,ia as m,jc as _,lc as d,ra as y,rb as P,sa as w,wc as l,xc as C,yc as k}from"./chunk-GTZL7DLP.js";var Ae=(t,i)=>i.id;function Ee(t,i){if(t&1){let e=S();n(0,"mat-list-item",7),_("click",function(){let c=y(e).$implicit,g=d();return w(g.select(c))}),n(1,"div",8)(2,"h4",9),l(3),o(),n(4,"p",10),l(5),o()()()}if(t&2){let e=i.$implicit;r(3),C(e.name),r(2),k("",e.itemCount," items")}}var V=class t{collectionService=m(de);dialog=m(b);data=m(N);dialogRef=m(Pe);category;collections=le(()=>this.collectionService.selfCollections().filter(i=>i.category===this.category));add(){var i=this.dialog.open(ye,{width:"550px",data:{collectionCategory:this.category}});i.afterClosed().subscribe(e=>{e&&typeof e==typeof ge&&this.select(e)})}select(i){this.dialogRef.close(i)}ngOnInit(){this.category=this.data.category}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-choose-collection-dialog"]],decls:16,vars:0,consts:[["mat-dialog-title",""],[1,"dialog-content"],[1,"add-collection-header",3,"click"],[1,"list-container"],[1,"collection-item"],["align","end"],["mat-flat-button","","mat-dialog-close",""],[1,"collection-item",3,"click"],[1,"collection-info"],[1,"collection-name"],[1,"collection-count"]],template:function(e,a){e&1&&(n(0,"h3",0),l(1,"Add to watchlist"),o(),n(2,"mat-dialog-content",1)(3,"div",2),_("click",function(){return a.add()}),n(4,"mat-icon"),l(5,"add"),o(),l(6," Add New Collection "),o(),s(7,"mat-divider"),n(8,"div",3)(9,"mat-list"),ie(10,Ee,6,2,"mat-list-item",4,Ae),o()(),s(12,"mat-divider"),o(),n(13,"mat-dialog-actions",5)(14,"button",6),l(15,"Cancel"),o()()),e&2&&(r(10),oe(a.collections()))},dependencies:[U,j,xe,be,Ie,Oe,ve,ue,Me,x,v,I,u,he],styles:[".mat-mdc-dialog-title[_ngcontent-%COMP%]{margin-top:var(--spacing-small);margin-bottom:var(--spacing-small);font-size:var(--font-size-h3)!important;text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-small)}.add-collection-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-small);cursor:pointer;font-size:var(--font-size-base);color:var(--text-color);padding:var(--spacing-small);border-radius:var(--border-radius-small)}.add-collection-header[_ngcontent-%COMP%]:hover{background-color:var(--background-color-light-hover)}.list-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.collection-item[_ngcontent-%COMP%]{cursor:pointer;border-radius:var(--border-radius-small);height:fit-content}.collection-item[_ngcontent-%COMP%]:hover{background-color:var(--background-color-light-hover)}.collection-item[_ngcontent-%COMP%]   .collection-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:var(--spacing-small) 0;gap:var(--spacing-xs)}.collection-item[_ngcontent-%COMP%]   .collection-name[_ngcontent-%COMP%]{margin:0;font-size:var(--font-size-base);line-height:var(--font-size-base);font-weight:var(--font-weight-normal);color:var(--text-color)}.collection-item[_ngcontent-%COMP%]   .collection-count[_ngcontent-%COMP%]{margin:0;font-size:var(--font-size-small);line-height:var(--font-size-small);color:var(--text-color-grey)}mat-dialog-actions[_ngcontent-%COMP%]{padding:0 var(--spacing-large) var(--spacing-medium)}"]})};var D=class t{dialog=m(b);notificationService=m(me);collectionItemsService=m(se);openChooseCollectionDialog(i){return this.dialog.open(V,{width:"400px",minHeight:"300px",maxHeight:"700px",data:{category:i}}).afterClosed()}openChooseCollectionDialogAndAddMediaItem(i,e){this.openChooseCollectionDialog(i).subscribe(a=>{if(a){var c={mediaItemApiId:e,collectionId:a.id,toDo:!0,rating:0};this.collectionItemsService.addMediaItem(c).subscribe({next:g=>this.notificationService.showSuccess(),error:g=>{let E=g instanceof Error?g.message:typeof g=="string"?g:void 0;this.notificationService.showFailure(E)}})}})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var Be=()=>[A,$,_e,Ce,u,import("./chunk-3RLVX5D2.js").then(t=>t.DatePipe),R,v,import("./chunk-AGUFH6EM.js").then(t=>t.ImgFallbackDirective)];function Le(t,i){if(t&1&&(n(0,"span",7),l(1),z(2,"date"),o()),t&2){let e,a=d(2);r(),k("(",T(2,1,(e=a.mediaItem())==null?null:e.releaseDate,"yyyy"),")")}}function Ne(t,i){if(t&1&&(n(0,"span"),l(1),o()),t&2){let e,a=d(2);r(),C((e=a.mediaItem())==null?null:e.genre)}}function je(t,i){if(t&1&&(n(0,"span"),l(1),o()),t&2){let e,a=d(2);r(),C(a.formatLength((e=a.mediaItem())==null?null:e.length))}}function Ue(t,i){if(t&1&&(n(0,"span",8)(1,"span"),l(2),o(),n(3,"mat-icon"),l(4,"star"),o()()),t&2){let e,a=d(2);r(2),C((e=a.mediaItem())==null||e.voteAverage==null?null:e.voteAverage.toPrecision(2))}}function Ve(t,i){if(t&1){let e=S();n(0,"div",2)(1,"div",3),s(2,"img",4),o(),n(3,"div",5)(4,"mat-card-header",6)(5,"div")(6,"mat-card-title"),l(7),M(8,Le,3,4,"span",7),o(),n(9,"mat-card-subtitle"),M(10,Ne,2,1,"span")(11,je,2,1,"span")(12,Ue,5,1,"span",8),o()()(),n(13,"mat-card-content",9)(14,"section",10)(15,"button",11),_("click",function(){y(e);let c=d();return w(c.openCollectionsDialog())}),n(16,"mat-icon"),l(17,"bookmark_add"),o()(),n(18,"a",12)(19,"mat-icon"),l(20,"link"),o()()(),n(21,"section",13),l(22," Overview "),s(23,"p",14),o()()()()}if(t&2){let e,a,c,g,E,K,Q,X,f=d();p("@fadeIn",void 0),r(2),p("src",(e=f.mediaItem())==null?null:e.imageUrl,O),r(5),k("",(a=f.mediaItem())==null?null:a.title," "),r(),h((c=f.mediaItem())!=null&&c.releaseDate?8:-1),r(2),h((g=f.mediaItem())!=null&&g.genre?10:-1),r(),h((E=f.mediaItem())!=null&&E.length?11:-1),r(),h(((K=f.mediaItem())==null?null:K.voteAverage)!==null?12:-1),r(6),p("href",(Q=f.mediaItem())==null?null:Q.sourceUrl,O),r(5),p("innerHTML",(X=f.mediaItem())==null?null:X.overview,Z)}}function He(t,i){if(t&1){let e=S();n(0,"div",15)(1,"div",3),s(2,"img",16),o(),n(3,"div",5)(4,"mat-card-header",6)(5,"div"),s(6,"div",17)(7,"div",18),o()(),n(8,"mat-card-content",9)(9,"section",10)(10,"button",11),_("click",function(){y(e);let c=d();return w(c.openCollectionsDialog())}),n(11,"mat-icon"),l(12,"bookmark_add"),o()(),n(13,"a",12)(14,"mat-icon"),l(15,"link"),o()()(),n(16,"section",13),l(17," Overview "),s(18,"div",19),o()()()()}if(t&2){let e,a=d();r(13),p("href",(e=a.mediaItem())==null?null:e.sourceUrl,O)}}var H=class t{mediaService=m(pe);chooseCollectionDialogService=m(D);data=m(N);mediaItem=ee(null);openCollectionsDialog(){let i=this.mediaItem();i&&this.chooseCollectionDialogService.openChooseCollectionDialogAndAddMediaItem(i.category,i.itemApiId)}formatLength(i){return this.mediaService.formatLength(i,this.mediaItem()?.category)}ngOnInit(){if(!this.data.apiId||!this.data.category)return;let i={mediaItemApiId:this.data.apiId,collectionCategory:this.data.category};this.mediaService.getMediaItemDetails(i).subscribe(e=>{this.mediaItem.set(e)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-media-item-details-dialog"]],decls:8,vars:1,consts:[[1,"container"],["mat-flat-button","","mat-dialog-close","",1,"close-button"],[1,"item-container"],[1,"image-container"],["width","300","height","450","appImgFallback","media-item-placeholder.png","alt","Media Item Image","draggable","false",1,"item-image",3,"src"],[1,"item-details"],[1,"item-header"],[1,"year"],[1,"vote-average"],[1,"content"],[1,"actions"],["mat-button","",1,"action-button",3,"click"],["mat-button","","target","_blank",1,"action-button",3,"href"],[1,"overview"],[3,"innerHTML"],[1,"item-container","placeholder"],["width","300","height","450",1,"item-image"],[1,"placeholder-line","title"],[1,"placeholder-line","subtitle"],[1,"placeholder-line","overview"]],template:function(e,a){e&1&&(n(0,"mat-card",0),M(1,Ve,24,9)(2,He,19,1),te(3,1,Be,null,2),n(5,"button",1)(6,"mat-icon"),l(7,"close"),o()()()),e&2&&(r(3),ne(a.mediaItem()))},dependencies:[U,j,L,B,A,$,I,u,x,R,v],styles:['@charset "UTF-8";.close-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;min-width:50px;width:50px;height:50px;background-color:transparent}.close-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:var(--spacing-large);min-height:150px;width:100%}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]{display:flex;width:100%;overflow:hidden;gap:var(--spacing-small);padding-right:var(--spacing-large);margin-right:var(--spacing-small)}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{border-radius:var(--border-radius-medium)}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-large);overflow-y:auto;width:100%}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:left;padding-top:0}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{width:100%;font-size:var(--font-size-h2);font-weight:var(--font-weight-bold)}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%]{color:var(--text-color-grey);font-weight:var(--font-weight-normal)}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{margin-top:var(--spacing-xs);font-size:var(--font-size-h5)}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]   .vote-average[_ngcontent-%COMP%]{display:inline-flex;align-items:center;color:var(--golden-star-color)}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:var(--spacing-xs);font-size:var(--font-size-h5);line-height:var(--font-size-h5);height:var(--font-size-h5);width:var(--font-size-h5)}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"\\2022";margin-left:var(--spacing-small);margin-right:var(--spacing-small);color:var(--mat-card-subtitle-text-color)}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child:before{content:"";margin-left:0;margin-right:0}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-bottom:0;gap:var(--spacing-xl)}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:var(--spacing-small)}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:50px;min-width:50px}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0;font-size:var(--font-size-h3);line-height:var(--font-size-h3);height:var(--font-size-h3);width:var(--font-size-h3)}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .overview[_ngcontent-%COMP%]{font-size:var(--font-size-h3)}.container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .overview[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:var(--spacing-small);font-size:var(--font-size-h5)}.spacer[_ngcontent-%COMP%]{flex-grow:1}.placeholder[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{background-color:#ccc;animation:_ngcontent-%COMP%_pulse 2.5s infinite ease-in-out}.placeholder[_ngcontent-%COMP%]   .placeholder-line[_ngcontent-%COMP%]{height:14px;margin-top:var(--spacing-small);background-color:#ddd;border-radius:4px;animation:_ngcontent-%COMP%_pulse 2.5s infinite ease-in-out}.placeholder[_ngcontent-%COMP%]   .placeholder-line.title[_ngcontent-%COMP%]{width:80%;height:var(--font-size-h2);margin-top:0}.placeholder[_ngcontent-%COMP%]   .placeholder-line.subtitle[_ngcontent-%COMP%]{width:60%;height:var(--font-size-h5)}.placeholder[_ngcontent-%COMP%]   .placeholder-line.overview[_ngcontent-%COMP%]{width:80%;height:200px}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.5}to{opacity:1}}'],data:{animation:[W("fadeOut",[q(":leave",[G("500ms ease-out",F({opacity:0}))])]),W("fadeIn",[q(":enter",[F({opacity:0}),G("600ms ease-in",F({opacity:1}))])])]}})};var Re=t=>({"fixed-width":t});function We(t,i){if(t&1&&(n(0,"p"),l(1),z(2,"date"),o()),t&2){let e=d();r(),C(T(2,1,e.mediaItem.releaseDate,"yyyy"))}}function Ge(t,i){t&1&&(n(0,"p"),l(1,"TBA"),o())}var ze=class t{mediaItem;responsiveWidth=!1;dialog=m(b);chooseCollectionDialogService=m(D);openCollectionsDialog(){this.chooseCollectionDialogService.openChooseCollectionDialogAndAddMediaItem(this.mediaItem.category,this.mediaItem.itemApiId)}openDetails(){this.dialog.open(H,{data:{apiId:this.mediaItem.itemApiId,category:this.mediaItem.category},width:"1000px",maxWidth:"90vw",height:"498px",maxHeight:"90vh"})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-media-item-tile"]],inputs:{mediaItem:"mediaItem",responsiveWidth:"responsiveWidth"},decls:14,vars:11,consts:[[1,"tile",3,"ngClass"],[3,"click"],["mat-card-image","","appImgFallback","media-item-placeholder.png","height","291","width","194","alt","Collection image","draggable","false",3,"src"],[1,"tile-content"],[3,"title"],["mat-flat-button","",1,"add-btn",3,"click"]],template:function(e,a){if(e&1&&(n(0,"mat-card",0)(1,"div",1),_("click",function(){return a.openDetails()}),s(2,"img",2),n(3,"mat-card-content",3)(4,"h3",4),l(5),o(),n(6,"p"),l(7),o(),M(8,We,3,4,"p"),z(9,"date"),M(10,Ge,2,0,"p"),o()(),n(11,"button",5),_("click",function(){return a.openCollectionsDialog()}),n(12,"mat-icon"),l(13,"bookmark_add"),o()()()),e&2){let c;p("ngClass",ae(9,Re,!a.responsiveWidth)),r(2),p("src",(c=a.mediaItem.imageUrl)!==null&&c!==void 0?c:"media-item-placeholder.png",O),r(2),p("title",a.mediaItem.title),r(),C(a.mediaItem.title),r(2),C(a.mediaItem.genre),r(),h(T(9,6,a.mediaItem.releaseDate,"yyyy")?8:10)}},dependencies:[L,B,A,fe,ce,x,v,I,u,De,re],styles:[".link[_ngcontent-%COMP%]{text-decoration:none}.tile[_ngcontent-%COMP%]{min-width:200px;max-width:300px;min-height:300px;border:3px solid var(--background-color-steel);border-radius:var(--border-radius-medium);cursor:pointer;transition:transform .2s}.tile.fixed-width[_ngcontent-%COMP%]{width:200px}.tile[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.tile[_ngcontent-%COMP%]   img[mat-card-image][_ngcontent-%COMP%]{width:100%;height:100%;aspect-ratio:2/3;object-fit:cover;border-top-left-radius:var(--border-radius-medium);border-top-right-radius:var(--border-radius-medium)}.tile[_ngcontent-%COMP%]   .tile-content[_ngcontent-%COMP%]{margin-top:var(--spacing-small)}.tile[_ngcontent-%COMP%]   .tile-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block;font-size:var(--font-size-h4);color:var(--text-color);margin:var(--spacing-small) 0 var(--spacing-xs)}.tile[_ngcontent-%COMP%]   .tile-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block;font-size:var(--font-size-additional);color:var(--text-color-grey);margin:0}.add-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:64px;height:64px;background-color:var(--background-color-dark)!important;border-radius:0 var(--border-radius-medium) 0 var(--border-radius-medium);opacity:.6;transition:opacity .3s ease}.add-btn[_ngcontent-%COMP%]:hover{opacity:.9}.add-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;margin:0}"]})};export{ze as a};
