import{c as H}from"./chunk-37VZEYXA.js";import{b as k,f as A,k as R,p as z}from"./chunk-LWZQ6JOT.js";import{aa as V}from"./chunk-KBHRRCXS.js";import{Ac as w,Ba as F,Bc as y,Cc as v,Ea as x,Ib as c,Nb as s,Rc as I,Xb as p,Yb as u,bc as m,hb as l,ia as b,jc as f,lc as o,qc as g,ra as d,rb as M,rc as h,sa as a,sc as C,wc as T,xc as E}from"./chunk-GTZL7DLP.js";var P=["inputField"],O=["inputArea"];function Q(i,n){if(i&1&&(p(0,"h1",5),T(1),u()),i&2){let e=o(2);s("title",e.text()),l(),E(e.text())}}function W(i,n){if(i&1){let e=m();p(0,"input",6,0),v("ngModelChange",function(t){d(e);let _=o(2);return y(_.editedText,t)||(_.editedText=t),a(t)}),f("blur",function(){d(e);let t=o(2);return a(t.confirmEdit())})("keydown.enter",function(){d(e);let t=o(2);return a(t.confirmEdit())})("click",function(t){return d(e),a(t.stopPropagation())}),u()}if(i&2){let e=o(2);w("ngModel",e.editedText)}}function D(i,n){if(i&1&&(p(0,"div"),c(1,Q,2,2,"h1",3)(2,W,2,1,"input",4),u()),i&2){let e=o();l(),s("ngIf",!e.isEditing()),l(),s("ngIf",e.isEditing())}}function L(i,n){if(i&1&&(p(0,"p"),T(1),u()),i&2){let e=o(2);l(),E(e.text())}}function N(i,n){if(i&1){let e=m();p(0,"textarea",8,1),v("ngModelChange",function(t){d(e);let _=o(2);return y(_.editedText,t)||(_.editedText=t),a(t)}),f("blur",function(){d(e);let t=o(2);return a(t.confirmEdit())})("input",function(){d(e);let t=o(2);return a(t.onInput())})("keydown.enter",function(){d(e);let t=o(2);return a(t.confirmEdit())})("click",function(t){return d(e),a(t.stopPropagation())}),u()}if(i&2){let e=o(2);w("ngModel",e.editedText)}}function j(i,n){if(i&1&&(p(0,"div"),c(1,L,2,1,"p",2)(2,N,2,1,"textarea",7),u()),i&2){let e=o();l(),s("ngIf",!e.isEditing()),l(),s("ngIf",e.isEditing())}}var S=class i{isHeader=!0;editEnd=new F;inputField;inputArea;text=x();isEditing=x();cdr=b(I);editedText="";isInputRendered=!1;resizeTimeout;confirmEdit(){this.isInputRendered=!1,this.editEnd.emit(this.editedText.trim())}onInput(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.inputArea&&this.autoResizeTextarea(this.inputArea.nativeElement)},50)}autoResizeTextarea(n){n.style.height="auto",n.style.height=n.scrollHeight+"px"}setCursorOnInputField(){if(!this.inputField&&!this.inputArea){console.error("inputField nie zosta\u0142 zainicjalizowany");return}let n=this.isHeader?this.inputField.nativeElement:this.inputArea.nativeElement;n.focus();let e=n.value.length;n.setSelectionRange(e,e)}ngAfterViewChecked(){this.isEditing()&&!this.isInputRendered&&(this.inputField||this.inputArea)&&setTimeout(()=>{this.editedText=this.text()||"",this.isInputRendered=!0,this.setCursorOnInputField(),this.isHeader||this.autoResizeTextarea(this.inputArea.nativeElement),this.cdr.detectChanges()})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-editable-text-field"]],viewQuery:function(e,r){if(e&1&&(g(P,5),g(O,5)),e&2){let t;h(t=C())&&(r.inputField=t.first),h(t=C())&&(r.inputArea=t.first)}},inputs:{isHeader:"isHeader",text:[1,"text"],isEditing:[1,"isEditing"]},outputs:{editEnd:"editEnd"},decls:2,vars:2,consts:[["inputField",""],["inputArea",""],[4,"ngIf"],["class","text",3,"title",4,"ngIf"],["type","text","class","edit-input",3,"ngModel","ngModelChange","blur","keydown.enter","click",4,"ngIf"],[1,"text",3,"title"],["type","text",1,"edit-input",3,"ngModelChange","blur","keydown.enter","click","ngModel"],["type","text","class","edit-input",3,"ngModel","ngModelChange","blur","input","keydown.enter","click",4,"ngIf"],["type","text",1,"edit-input",3,"ngModelChange","blur","input","keydown.enter","click","ngModel"]],template:function(e,r){e&1&&c(0,D,3,2,"div",2)(1,j,3,2,"div",2),e&2&&(s("ngIf",r.isHeader),l(),s("ngIf",!r.isHeader))},dependencies:[H,z,k,A,R,V],styles:["h1[_ngcontent-%COMP%]{font-size:inherit;margin:0}p[_ngcontent-%COMP%]{margin:0;text-align:justify}.edit-input[_ngcontent-%COMP%]{display:flex;font-size:inherit;font-family:inherit;line-height:inherit;border:1px solid var(--background-color);width:100%;outline:none;border-radius:var(--border-radius-small)}.text[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block}"]})};export{S as a};
