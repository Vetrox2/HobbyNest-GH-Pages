import{a as X}from"./chunk-QLTOVHG6.js";import{a as H,b as J,c as K,d as Q}from"./chunk-EAK74UCQ.js";import{a as W}from"./chunk-VFWGXLKL.js";import{p as A}from"./chunk-PQX3IJ57.js";import{a as $}from"./chunk-MEWO5AOR.js";import{k as B,l as L}from"./chunk-T7LPRNXJ.js";import{d as R,e as z}from"./chunk-DUFJBNB2.js";import{a as N,b as j}from"./chunk-UDO64JFM.js";import{a as q,c as G,h as U,j as Y}from"./chunk-WGHJWKF4.js";import{g as V}from"./chunk-EGNYUSMU.js";import{t as D}from"./chunk-RAN27MHH.js";import{$b as E,$c as T,Ac as g,B as C,Cc as h,Db as k,Fa as v,Ic as F,Kb as b,Pb as u,Qb as x,Ub as P,Zb as i,_b as l,ac as O,bc as w,dc as M,eb as S,ga as f,hb as n,j as _,lc as p,nc as s,qa as m,ra as d,rb as y,yc as I,zc as r}from"./chunk-ZS453FTV.js";var te=o=>["/collections",o];function ie(o,c){if(o&1&&(i(0,"p"),r(1),l()),o&2){let e=s().$implicit,t=s();n(),h(" ",e("collection.collectionTile.status"),": ",t.collection().isPublic?e("collection.collectionTile.public"):e("collection.collectionTile.private")," ")}}function ne(o,c){if(o&1){let e=M();i(0,"button",9),p("click",function(a){return m(e),d(a.stopPropagation())}),i(1,"mat-icon"),r(2,"more_horiz"),l()()}if(o&2){s();let e=I(14);u("matMenuTriggerFor",e)}}function oe(o,c){if(o&1){let e=M();O(0),i(1,"mat-card",2),E(2,"img",3),i(3,"mat-card-content",4)(4,"div",5)(5,"h1")(6,"app-editable-text-field",6),p("editEnd",function(a){m(e);let ee=s();return d(ee.confirmRename(a))}),l()(),i(7,"p"),r(8),l(),b(9,ie,2,2,"p"),i(10,"p"),r(11),l()(),b(12,ne,3,1,"button",7),i(13,"mat-menu",null,0)(15,"button",8),p("click",function(){m(e);let a=s();return d(a.onRename())}),i(16,"mat-icon"),r(17,"edit"),l(),i(18,"span"),r(19),l()(),i(20,"button",8),p("click",function(){m(e);let a=s();return d(a.onPublicStatusChange())}),i(21,"mat-icon"),r(22),l(),i(23,"span"),r(24),l()(),i(25,"button",8),p("click",function(){m(e);let a=s();return d(a.onDelete())}),i(26,"mat-icon"),r(27,"delete"),l(),i(28,"span"),r(29),l()()()()(),w()}if(o&2){let e=c.$implicit,t=s();n(),u("routerLink",F(18,te,t.collection().id)),n(),x("aspect-ratio",t.innerImageRatio()),u("src",t.tileImage(),S),n(2),x("width",t.isOnCollectionPage()?"calc(100% - 50px)":"100%"),n(2),u("text",t.collection().name)("isEditing",t.isEditing()),n(2),h("",e("collection.collectionTile.category"),": ",e("collection.category."+t.collection().category),""),n(),P(t.isOnCollectionPage()?9:-1),n(2),h("",e("collection.collectionTile.items"),": ",t.collection().itemCount,""),n(),P(t.isOnCollectionPage()?12:-1),n(7),g(e("button.rename")),n(3),g(t.collection().isPublic?"lock":"lock_open"),n(2),g(t.collection().isPublic?e("collection.makePrivate"):e("collection.makePublic")),n(5),g(e("button.delete"))}}var Z=class o{collection=v.required();isOnCollectionPage=v(!1);imageRatio=v();collectionService=f($);notificationService=f(L);dialogService=f(B);movieTilePlaceholder="movie-tile-placeholder.png";seriesTilePlaceholder="series-tile-placeholder.png";gameTilePlaceholder="game-tile-placeholder.png";bookTilePlaceholder="book-tile-placeholder.png";customTilePlaceholder="custom-tile-placeholder.png";innerImageRatio=T(()=>this.imageRatio()??1.8);tileImage=T(()=>{switch(this.collection().category){case"series":return this.seriesTilePlaceholder;case"movie":return this.movieTilePlaceholder;case"game":return this.gameTilePlaceholder;case"book":return this.bookTilePlaceholder;case"custom":return this.customTilePlaceholder;default:return this.customTilePlaceholder}});isEditing=k(!1);onPublicStatusChange(){this.collection().isPublic?this.togglePublicStatus():this.dialogService.openConfirmChangeCollectionStatusToPublicDialog().subscribe(c=>{c&&this.togglePublicStatus()})}onRename(){this.isEditing.set(!0)}confirmRename(c){this.collectionService.updateCollectionName(this.collection().id,c,this.collection().name).pipe(C(()=>(this.notificationService.showFailure(),_))).subscribe(),this.isEditing.set(!1)}onDelete(){this.dialogService.openConfirmDeleteDialog(this.collection().name).subscribe(c=>{c&&this.collectionService.deleteCollection(this.collection().id).pipe(C(()=>(this.notificationService.showFailure(),_))).subscribe()})}togglePublicStatus(){this.collectionService.updateCollectionPublicStatus(this.collection().id,!this.collection().isPublic).pipe(C(()=>(this.notificationService.showFailure(),_))).subscribe()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-collection-tile"]],inputs:{collection:[1,"collection"],isOnCollectionPage:[1,"isOnCollectionPage"],imageRatio:[1,"imageRatio"]},decls:1,vars:0,consts:[["menu","matMenu"],[4,"transloco"],[1,"collection-card",3,"routerLink"],["mat-card-image","","appImgFallback","movie-tile-placeholder.png","alt","Collection image","draggable","false",3,"src"],[1,"collection-card-content"],[1,"collection-details"],[3,"editEnd","text","isEditing"],["mat-icon-button","",1,"menu-button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-icon-button","",1,"menu-button",3,"click","matMenuTriggerFor"]],template:function(e,t){e&1&&b(0,oe,30,20,"ng-container",1)},dependencies:[Y,q,G,U,z,R,V,Q,J,H,K,j,N,A,X,W,D],styles:[".collection-card[_ngcontent-%COMP%]{width:100%;border:3px solid var(--background-color-steel);border-radius:var(--border-radius-medium);cursor:pointer;transition:transform .2s}.collection-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.collection-card[_ngcontent-%COMP%]   img[mat-card-image][_ngcontent-%COMP%]{object-fit:cover;border-top-left-radius:var(--border-radius-medium);border-top-right-radius:var(--border-radius-medium)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-top:var(--spacing-xs)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .collection-details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-size-h4);margin:var(--spacing-small) 0 var(--spacing-xs)}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .collection-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--font-size-medium);color:var(--text-color-additional);margin:0}.collection-card[_ngcontent-%COMP%]   .collection-card-content[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{margin-right:-10px}"]})};export{Z as a};
