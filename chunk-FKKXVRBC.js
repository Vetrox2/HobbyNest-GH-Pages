import{a as m,r as b}from"./chunk-TQO57KJH.js";import{Ab as f,E as s,_ as p,a as o,b as a,ca as u,ia as l,o as n,p as c,s as i}from"./chunk-7IX7LMTZ.js";var U=class t{apiService=l(m);notificationService=l(b);_selfUser=f(null);get selfUser(){return this._selfUser.asReadonly()}resetState(){this._selfUser.set(null)}updateSelf(e){return this.apiService.patch("user",e).pipe(i(()=>(this._selfUser.update(r=>r&&a(o({},r),{username:e.username,profilePictureUrl:e.profilePictureUrl,bio:e.bio})),!0)),s(r=>{let v=r instanceof Error?r.message:typeof r=="string"?r:void 0;return this.notificationService.showFailure(v),n(!1)}))}getUser(){return this.apiService.get("user")}getUserById(e){return this.apiService.get("user/id",e)}searchUser(e){return this.apiService.get("user/name",e)}fetchSelf(){return this.getUser().pipe(p(e=>{this._selfUser.set(e)}),i(()=>null),s(e=>(this._selfUser.set(null),c(()=>e))))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})};export{U as a};
