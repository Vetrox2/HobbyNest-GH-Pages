import{a as j}from"./chunk-Z4A3WAPY.js";import{a as U}from"./chunk-B2YL2UP5.js";import{b as _,c as y}from"./chunk-LEWF7TYZ.js";import{a as d,c as b}from"./chunk-QIGJSNOR.js";import{a as u}from"./chunk-RKJUSBNY.js";import{a as I}from"./chunk-23J5AW3P.js";import{a as m}from"./chunk-UFHDFMSB.js";import{a as h,m as g}from"./chunk-7XV4WYW5.js";import{B as s,Db as p,F as v,K as S,V as f,aa as r,f as n,ga as e,j as l,l as c}from"./chunk-BNW6Q7MZ.js";var k=I("SocialLogin",{web:()=>import("./chunk-3O57NQGP.js").then(i=>new i.SocialLoginWeb)});var o=class i{_collectionDetailsStateService=e(b);_collectionService=e(m);_friendService=e(_);_userProfileService=e(y);_userService=e(u);_homeService=e(U);_statisticsService=e(j);resetState(){this._collectionDetailsStateService.resetState(),this._collectionService.resetState(),this._friendService.resetState(),this._userProfileService.resetState(),this._userService.resetState(),this._homeService.resetState(),this._statisticsService.resetState()}fetchSelfCollectionState(){return this._collectionService.fetchSelfCollections()}fetchSelfFriendState(){return this._friendService.fetchSelfFriends()}fetchSelfUserState(){return this._userService.fetchSelf()}static \u0275fac=function(a){return new(a||i)};static \u0275prov=r({token:i,factory:i.\u0275fac,providedIn:"root"})};var F=class i{refreshUrl="auth/refresh";loginUrl="auth/google";logoutUrl="auth/logout";checkUrl="auth/check";googleClientId="378133115800-ssavoq3n7kl6k78c44g7rlp1qcn5362s.apps.googleusercontent.com";_apiService=e(h);_navigationService=e(d);_stateFacadeService=e(o);_notificationService=e(g);_isRefreshing=p(!1);refreshSubject=new n;get isRefreshing(){return this._isRefreshing()}initGoogleLogin(){k.initialize({google:{webClientId:this.googleClientId}})}loginWithGoogle(t){return this._apiService.post(this.loginUrl,{idToken:t})}logout(){this._apiService.post(this.logoutUrl).subscribe(()=>{this._stateFacadeService.resetState(),this._navigationService.navigateToLogin()})}isLoggedIn(){return this._apiService.get(this.checkUrl).pipe(s(()=>c(!1)))}refreshToken(){return this._isRefreshing()?this.refreshSubject.pipe(v(1),f(()=>c(null))):(this._isRefreshing.set(!0),this._apiService.post(this.refreshUrl).pipe(s(t=>(this._navigationService.navigateToLogin(),t.message&&this._notificationService.showFailure(t.message),l)),S(()=>{this._isRefreshing.set(!1),this.refreshSubject.next()})))}static \u0275fac=function(a){return new(a||i)};static \u0275prov=r({token:i,factory:i.\u0275fac,providedIn:"root"})};export{k as a,F as b};
