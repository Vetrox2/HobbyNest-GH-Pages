import{b as _,c as y}from"./chunk-RWXJJM2Q.js";import{a as d,c as b}from"./chunk-UJSI22XH.js";import{a as u}from"./chunk-UMLUJNFX.js";import{a as j}from"./chunk-23J5AW3P.js";import{a as U}from"./chunk-DHTAYFFS.js";import{a as m}from"./chunk-5RXDSADJ.js";import{a as h,g}from"./chunk-TUSFAYHM.js";import{B as c,Db as S,F as v,K as f,V as p,aa as t,f as s,ga as e,j as l,l as n}from"./chunk-BNW6Q7MZ.js";var I=j("SocialLogin",{web:()=>import("./chunk-3O57NQGP.js").then(i=>new i.SocialLoginWeb)});var o=class i{_collectionDetailsStateService=e(b);_collectionService=e(m);_friendService=e(_);_userProfileService=e(y);_userService=e(u);_homeService=e(U);resetState(){this._collectionDetailsStateService.resetState(),this._collectionService.resetState(),this._friendService.resetState(),this._userProfileService.resetState(),this._userService.resetState(),this._homeService.resetState()}fetchSelfCollectionState(){return this._collectionService.fetchSelfCollections()}fetchSelfFriendState(){return this._friendService.fetchSelfFriends()}fetchSelfUserState(){return this._userService.fetchSelf()}static \u0275fac=function(a){return new(a||i)};static \u0275prov=t({token:i,factory:i.\u0275fac,providedIn:"root"})};var k=class i{refreshUrl="auth/refresh";loginUrl="auth/google";logoutUrl="auth/logout";checkUrl="auth/check";googleClientId="378133115800-ssavoq3n7kl6k78c44g7rlp1qcn5362s.apps.googleusercontent.com";_apiService=e(h);_navigationService=e(d);_stateFacadeService=e(o);_notificationService=e(g);_isRefreshing=S(!1);refreshSubject=new s;get isRefreshing(){return this._isRefreshing()}initGoogleLogin(){I.initialize({google:{webClientId:this.googleClientId}})}loginWithGoogle(r){return this._apiService.post(this.loginUrl,{idToken:r})}logout(){this._apiService.post(this.logoutUrl).subscribe(()=>{this._stateFacadeService.resetState(),this._navigationService.navigateToLogin()})}isLoggedIn(){return this._apiService.get(this.checkUrl).pipe(c(()=>n(!1)))}refreshToken(){return this._isRefreshing()?this.refreshSubject.pipe(v(1),p(()=>n(null))):(this._isRefreshing.set(!0),this._apiService.post(this.refreshUrl).pipe(c(r=>(this._navigationService.navigateToLogin(),r.message&&this._notificationService.showFailure(r.message),l)),f(()=>{this._isRefreshing.set(!1),this.refreshSubject.next()})))}static \u0275fac=function(a){return new(a||i)};static \u0275prov=t({token:i,factory:i.\u0275fac,providedIn:"root"})};export{I as a,k as b};
