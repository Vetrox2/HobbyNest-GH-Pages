import{a as D,b as E}from"./chunk-JXPERBIZ.js";import{a as V}from"./chunk-ANQTRRUI.js";import{y as L,z}from"./chunk-RZNO32K5.js";import{a as U,b as j}from"./chunk-JUB4HLJK.js";import{a as N,b as q,i as R}from"./chunk-GI253YVA.js";import{b as A,e as T}from"./chunk-F6BCK6HS.js";import{m as y}from"./chunk-HVWCVND4.js";import{k as S,m as P,n as k,o as B,p as I}from"./chunk-66SFJMCG.js";import{$b as _,Ea as F,Fb as C,Hb as l,Kc as v,Qb as a,Rb as c,Sb as h,Wb as p,bb as M,bc as r,fb as o,ia as g,mc as d,nc as x,ob as b,oc as f,ra as m,sa as u,vc as O}from"./chunk-7IX7LMTZ.js";function J(e,s){if(e&1){let t=p();a(0,"button",5),_("click",function(){m(t);let i=r();return u(i.deleteFriend())})("mouseenter",function(){m(t);let i=r();return u(i.hoverAddFriendButton=!0)})("mouseleave",function(){m(t);let i=r();return u(i.hoverAddFriendButton=!1)}),a(1,"mat-icon"),d(2),c(),d(3),c()}if(e&2){let t=r();o(2),x(t.hoverAddFriendButton?"person_remove":"how_to_reg"),o(),f(" ",t.actionButtonsSmall?"":t.hoverAddFriendButton?"Delete friend":"Friends"," ")}}function K(e,s){if(e&1){let t=p();a(0,"button",5),_("click",function(){m(t);let i=r();return u(i.deleteFriend())})("mouseenter",function(){m(t);let i=r();return u(i.hoverAddFriendButton=!0)})("mouseleave",function(){m(t);let i=r();return u(i.hoverAddFriendButton=!1)}),a(1,"mat-icon"),d(2),c(),d(3),c()}if(e&2){let t=r();o(2),x(t.hoverAddFriendButton?"person_remove":"hourglass_empty"),o(),f(" ",t.actionButtonsSmall?"":t.hoverAddFriendButton?"Cancel request":"Request sent"," ")}}function Q(e,s){if(e&1){let t=p();a(0,"button",6),_("click",function(){m(t);let i=r();return u(i.acceptFriendRequest())}),a(1,"mat-icon"),d(2,"done"),c(),d(3),c()}if(e&2){let t=r();o(3),f(" ",t.actionButtonsSmall?"":"Accept request"," ")}}function W(e,s){if(e&1){let t=p();a(0,"button",7),_("click",function(){m(t);let i=r();return u(i.deleteFriend())}),a(1,"mat-icon"),d(2,"close"),c(),d(3),c()}if(e&2){let t=r();o(3),f(" ",t.actionButtonsSmall?"":"Decline request"," ")}}function Y(e,s){if(e&1){let t=p();a(0,"button",6),_("click",function(){m(t);let i=r();return u(i.addFriend())}),a(1,"mat-icon"),d(2,"person_add"),c(),d(3),c()}if(e&2){let t=r();o(3),f(" ",t.actionButtonsSmall?"":"Add friend"," ")}}var w=class e{actionButtonsSmall=!1;userId=F(0);friendService=g(E);dialogService=g(L);friendStatus=D;friend=v(()=>this.friendService.selfFriends()?.find(s=>this.userId()===s.id));relationStatus=v(()=>this.friend()?.status??"");hoverAddFriendButton=!1;addFriend(){this.friendService.sendFriendRequest(this.userId())}acceptFriendRequest(){this.friendService.acceptFriendRequest(this.userId())}deleteFriend(){this.dialogService.openConfirmDeleteDialog(this.friend()?.username??"").subscribe(s=>{s&&this.friendService.deleteFriend(this.userId())})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-friend-actions"]],inputs:{actionButtonsSmall:"actionButtonsSmall",userId:[1,"userId"]},decls:6,vars:6,consts:[[1,"friend-button-container",3,"ngClass","ngSwitch"],["mat-stroked-button","","class","button-with-cancel",3,"click","mouseenter","mouseleave",4,"ngSwitchCase"],["mat-stroked-button","",3,"click",4,"ngSwitchCase"],["mat-stroked-button","","class","decline",3,"click",4,"ngSwitchCase"],["mat-stroked-button","",3,"click",4,"ngSwitchDefault"],["mat-stroked-button","",1,"button-with-cancel",3,"click","mouseenter","mouseleave"],["mat-stroked-button","",3,"click"],["mat-stroked-button","",1,"decline",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0),C(1,J,4,2,"button",1)(2,K,4,2,"button",1)(3,Q,4,1,"button",2)(4,W,4,1,"button",3)(5,Y,4,1,"button",4),c()),t&2&&(l("ngClass",n.actionButtonsSmall?"smallButton":"")("ngSwitch",n.relationStatus()),o(),l("ngSwitchCase",n.friendStatus.Accepted),o(),l("ngSwitchCase",n.friendStatus.Sent),o(),l("ngSwitchCase",n.friendStatus.Received),o(),l("ngSwitchCase",n.friendStatus.Received))},dependencies:[k,B,I,T,A,j,U,S],styles:[".friend-button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:var(--spacing-small);width:fit-content}.friend-button-container[_ngcontent-%COMP%]   .decline[_ngcontent-%COMP%]{background-color:var(--danger-color);transition:background-color .2s,color .2s}.friend-button-container[_ngcontent-%COMP%]   .decline[_ngcontent-%COMP%]:hover{background-color:var(--danger-color-hover)}.friend-button-container[_ngcontent-%COMP%]   .button-with-cancel[_ngcontent-%COMP%]{transition:background-color .3s,color .3s}.friend-button-container[_ngcontent-%COMP%]   .button-with-cancel[_ngcontent-%COMP%]:hover{background-color:var(--danger-color-hover)}.smallButton[_ngcontent-%COMP%]{gap:0px}.smallButton[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0;transform:scaleX(1.6666666667)}.smallButton[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transform:scaleX(.6);margin:0 -10px}"]})};var Z=e=>["/profile",e];function $(e,s){if(e&1&&h(0,"app-friend-actions",7),e&2){let t=r(2);l("userId",t.friend.id)("actionButtonsSmall",t.actionButtonsSmall)}}function tt(e,s){if(e&1&&(a(0,"div",5),C(1,$,1,2,"app-friend-actions",6),c()),e&2){let t=r();o(),l("ngIf",!t.amIThisUser())}}var X=class e{friend;actionButtonsOn=!0;actionButtonsSmall=!1;bgClass="";userService=g(V);amIThisUser=v(()=>this.userService.selfUser()?.id===this.friend.id);static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-friend-tile"]],inputs:{friend:"friend",actionButtonsOn:"actionButtonsOn",actionButtonsSmall:"actionButtonsSmall",bgClass:"bgClass"},decls:8,vars:7,consts:[[3,"ngClass"],[1,"content"],[1,"left-container",3,"routerLink"],["appImgFallback","user-avatar.png","alt","avatar","draggable","false",3,"src"],["class","right-container",4,"ngIf"],[1,"right-container"],[3,"userId","actionButtonsSmall",4,"ngIf"],[3,"userId","actionButtonsSmall"]],template:function(t,n){if(t&1&&(a(0,"mat-card",0)(1,"div",1)(2,"div",2),h(3,"img",3),a(4,"mat-card-title"),d(5),c()(),h(6,"span"),C(7,tt,2,1,"div",4),c()()),t&2){let i;l("ngClass",n.bgClass),o(2),l("routerLink",O(5,Z,n.friend.id)),o(),l("src",(i=n.friend.profilePictureUrl)!==null&&i!==void 0?i:"user-avatar.png",M),o(2),x(n.friend.username),o(2),l("ngIf",n.actionButtonsOn)}},dependencies:[w,R,N,q,y,P,S,z],styles:[".transparent[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none}mat-card[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;min-width:min(250px,100%);max-width:100%;max-height:100%}mat-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row;height:100%;padding:0 clamp(var(--spacing-small),2.5%,var(--spacing-medium))}mat-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:row;cursor:pointer;height:100%;max-width:70%}mat-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:65%;aspect-ratio:1/1;object-fit:cover;border-radius:50%;margin:0}mat-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin-left:10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block}mat-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{font-size:80%}"]})};export{w as a,X as b};
