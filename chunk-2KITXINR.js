import{a as De,b as we}from"./chunk-HW3RZRUE.js";import{a as $,b as Z,c as H}from"./chunk-JXPERBIZ.js";import{a as Me,b as ve}from"./chunk-GDRNNVVC.js";import{b as Fe}from"./chunk-27F2HPJX.js";import{b as ke}from"./chunk-PIHKLXUT.js";import{b as Pe,c as he,d as Oe}from"./chunk-E42DCNDF.js";import{a as P}from"./chunk-ANQTRRUI.js";import"./chunk-J5ZUHJNU.js";import{b as ce,c as de,d as pe,g as fe,h as ue,i as ge,j as _e,k as Ce,p as xe,q as be,r as ye,t as Se,u as Ee,w as Ue,x as Ie,z as Te}from"./chunk-RZNO32K5.js";import{b as te,d as C,f as ne,g as ie,h as re,j as b,l as oe,m as ae,n as le,p as me,q as se}from"./chunk-4RTAQCRI.js";import{a as Y,b as ee}from"./chunk-JUB4HLJK.js";import{a as W,b as K,d as J,h as Q,i as X}from"./chunk-GI253YVA.js";import{b as q,e as v}from"./chunk-F6BCK6HS.js";import"./chunk-HVWCVND4.js";import{l as R,m as B,t as G,u as V}from"./chunk-66SFJMCG.js";import{$b as _,Fb as f,Hb as m,Kc as x,Mb as F,Qb as i,Rb as t,Sb as d,Wb as k,Y as I,bb as w,bc as u,fb as o,ia as c,j as U,mc as a,nc as O,ob as M,oc as p,qc as z,ra as D,rc as N,sa as T,sc as A,xc as L,zc as j}from"./chunk-7IX7LMTZ.js";function Le(r,l){r&1&&(i(0,"mat-error"),a(1," Username is required "),t())}function je(r,l){if(r&1&&(i(0,"mat-error"),a(1),t()),r&2){let e,n=u();o(),p(" Username must be at least ",(e=n.usernameCtrl.getError("minlength"))==null?null:e.requiredLength," characters ")}}function Re(r,l){if(r&1&&(i(0,"mat-error"),a(1),t()),r&2){let e,n=u();o(),p(" Username cannot exceed ",(e=n.usernameCtrl.getError("maxlength"))==null?null:e.requiredLength," characters ")}}function Be(r,l){if(r&1&&(i(0,"mat-error"),a(1),t()),r&2){let e=u();o(),p(" Bio cannot exceed ",e.bioCtrl.getError("maxlength").requiredLength," characters ")}}var h=class r{dialogRef=c(xe);data=c(be);userService=c(P);form=new re({username:new b("",[C.required,C.minLength(3),C.maxLength(50)]),bio:new b("",C.maxLength(500))});get usernameCtrl(){return this.form.get("username")}get bioCtrl(){return this.form.get("bio")}save(){if(this.form.invalid)return;let l={username:this.usernameCtrl.value.trim(),profilePictureUrl:this.data.user.profilePictureUrl,bio:this.bioCtrl.value?.trim()??""};this.userService.updateSelf(l).subscribe(e=>{e&&this.dialogRef.close()})}cancel(){this.dialogRef.close()}ngOnInit(){if(!this.data?.user){console.log(this.data.user);return}this.usernameCtrl.setValue(this.data.user.username),this.bioCtrl.setValue(this.data.user.bio)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=M({type:r,selectors:[["app-edit-user-dialog"]],decls:20,vars:6,consts:[[1,"dialog-container"],["mat-dialog-title","",1,"title"],["mat-dialog-content","",1,"edit-profile-form",3,"formGroup"],["appearance","fill",1,"form-field"],["matInput","","placeholder","Enter your username","formControlName","username"],[4,"ngIf"],["matInput","","placeholder","Tell us about yourself","formControlName","bio","cdkTextareaAutosize","","cdkAutosizeMinRows","8","cdkAutosizeMaxRows","12"],["align","end"],["confirmText","Zapisz",1,"action-buttons",3,"cancel","confirm"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"h1",1),a(2,"Edit Profile"),t(),i(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),a(6,"Username"),t(),d(7,"input",4),f(8,Le,2,0,"mat-error",5)(9,je,2,1,"mat-error",5)(10,Re,2,1,"mat-error",5),t(),i(11,"mat-form-field",3)(12,"mat-label"),a(13,"Bio"),t(),d(14,"textarea",6),i(15,"mat-hint",7),a(16),t(),f(17,Be,2,1,"mat-error",5),t()(),d(18,"mat-divider"),i(19,"app-action-buttons",8),_("cancel",function(){return n.cancel()})("confirm",function(){return n.save()}),t()()),e&2&&(o(3),m("formGroup",n.form),o(5),m("ngIf",n.usernameCtrl.hasError("required")),o(),m("ngIf",n.usernameCtrl.hasError("minlength")),o(),m("ngIf",n.usernameCtrl.hasError("maxlength")),o(6),p(" ",n.bioCtrl.value.length||0," / 500 "),o(),m("ngIf",n.bioCtrl.hasError("maxlength")))},dependencies:[ue,fe,ce,pe,de,v,Ue,Se,Ee,se,oe,te,ne,ie,ae,le,Ie,V,B,Ce,_e,ge,ve,Me],styles:[".dialog-container[_ngcontent-%COMP%]{padding:var(--spacing-large)}.dialog-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:var(--text-color);font-size:var(--font-size-h2);margin-bottom:var(--spacing-large)}.dialog-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-medium)}.dialog-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}.dialog-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   mat-error[_ngcontent-%COMP%]{font-size:var(--font-size-additional)}.dialog-container[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin-bottom:var(--spacing-small)}"]})};function Ge(r,l){if(r&1){let e=k();i(0,"button",18),_("click",function(){D(e);let s=u();return T(s.editProfile())}),i(1,"mat-icon"),a(2,"edit"),t(),a(3,"Edit Profile"),t()}}function Ve(r,l){if(r&1&&d(0,"app-friend-actions",8),r&2){let e,n=u();m("userId",(e=(e=n.user())==null?null:e.id)!==null&&e!==void 0?e:0)}}function qe(r,l){if(r&1&&(i(0,"div"),d(1,"app-collection-tile",19),t()),r&2){let e=l.$implicit;o(),m("collection",e)("isOnCollectionPage",!1)}}function $e(r,l){if(r&1&&(i(0,"div",20),d(1,"app-friend-tile",21),t()),r&2){let e=l.$implicit;o(),m("friend",e)}}var ze=class r{friendService=c(Z);userProfileService=c(H);userService=c(P);dialog=c(ye);user=this.userProfileService.currentProfileUser;collections=this.userProfileService.currentProfileCollections;friends=this.userProfileService.currentProfileFriends;isProfileOwner=x(()=>this.user()?.id===this.userService.selfUser()?.id);friendsCount=x(()=>this.friends().filter(l=>l.status===$.Accepted).length);selectedTab=0;destroy$=new U;changeTab(l){this.selectedTab=l}editProfile(){this.dialog.open(h,{width:"550px",minHeight:"450px",data:{user:this.user()}})}ngOnInit(){this.userProfileService.profileChange$.pipe(I(this.destroy$)).subscribe(()=>{this.changeTab(0)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=M({type:r,selectors:[["app-user-profile"]],decls:42,vars:13,consts:[[1,"profile-header"],[1,"profile-card"],[1,"left-side"],["mat-card-avatar","","appImgFallback","user-avatar.png","alt","Zdj\u0119cie profilowe","draggable","false",3,"src"],[1,"profile-details"],[1,"sub-text"],[1,"sub-text","friends-count",3,"click"],["mat-stroked-button",""],[3,"userId"],["animationDuration","0",1,"user-content",3,"selectedIndexChange","selectedIndex"],["label","About me/Recent"],[1,"bio"],["label","Collections"],[1,"collections-grid"],[4,"ngFor","ngForOf"],["label","Friends"],[1,"friends-grid"],["class","friend-tile",4,"ngFor","ngForOf"],["mat-stroked-button","",3,"click"],[3,"collection","isOnCollectionPage"],[1,"friend-tile"],[3,"friend"]],template:function(e,n){if(e&1&&(i(0,"div",0)(1,"mat-card",1)(2,"div",2),d(3,"img",3),i(4,"div",4)(5,"div")(6,"mat-card-title"),a(7),t(),i(8,"mat-card-subtitle"),a(9),t()(),i(10,"div")(11,"mat-card-subtitle",5)(12,"mat-icon"),a(13,"calendar_month"),t(),a(14),L(15,"date"),t(),i(16,"mat-card-subtitle",6),_("click",function(){return n.changeTab(2)}),i(17,"mat-icon"),a(18,"people"),t(),a(19),t()()()(),i(20,"div"),f(21,Ge,4,0,"button",7)(22,Ve,1,1,"app-friend-actions",8),t()()(),i(23,"mat-tab-group",9),A("selectedIndexChange",function(g){return N(n.selectedTab,g)||(n.selectedTab=g),g}),i(24,"mat-tab",10)(25,"div",11)(26,"h4"),a(27,"O mnie"),t(),i(28,"div"),a(29),t()()(),i(30,"mat-tab",12)(31,"div")(32,"h4"),a(33,"Kolekcje u\u017Cytkownika"),t(),i(34,"div",13),f(35,qe,2,2,"div",14),t()()(),i(36,"mat-tab",15)(37,"div")(38,"h4"),a(39,"Znajomi u\u017Cytkownika"),t(),i(40,"div",16),f(41,$e,2,1,"div",17),t()()()()),e&2){let s,g,y,S,E;o(3),m("src",(s=(s=n.user())==null?null:s.profilePictureUrl)!==null&&s!==void 0?s:"user-avatar.png",w),o(4),O((g=n.user())==null?null:g.username),o(2),p("#",(y=n.user())==null?null:y.id,""),o(5),p(" Do\u0142\u0105czy\u0142 ",j(15,10,(S=n.user())==null?null:S.joinDate,"LLLL yyyy"),""),o(5),p("",n.friendsCount()," Znajomych"),o(2),F(n.isProfileOwner()?21:22),o(2),z("selectedIndex",n.selectedTab),o(6),O((E=n.user())==null?null:E.bio),o(6),m("ngForOf",n.collections()),o(6),m("ngForOf",n.friends())}},dependencies:[X,W,Q,J,K,v,q,ke,me,R,Fe,G,ee,Y,Oe,Pe,he,De,we,Te],styles:[".profile-header[_ngcontent-%COMP%]{display:flex;margin-bottom:var(--spacing-large)}.profile-header[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:var(--spacing-large);width:100%}.profile-header[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{display:flex;flex-direction:row}.profile-header[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   img[mat-card-avatar][_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;margin-bottom:0}.profile-header[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-medium);justify-content:center;margin:0px 0px 0px var(--spacing-large)}.profile-header[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:var(--font-size-h2);color:var(--text-color);font-weight:700}.profile-header[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{font-size:var(--font-size-additional);color:var(--text-color-additional)}.profile-header[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   .friends-count[_ngcontent-%COMP%]{cursor:pointer}.profile-header[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs)}.profile-header[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px}.user-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center}.user-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]{margin:auto;width:fit-content;max-width:1000px;white-space:pre-line}.user-content[_ngcontent-%COMP%]   .collections-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:var(--spacing-medium);padding:var(--spacing-small);overflow-x:hidden}.user-content[_ngcontent-%COMP%]   .collections-grid[_ngcontent-%COMP%]   .collection-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s;border:3px solid rgb(90,90,90);border-radius:var(--border-radius-medium)}.user-content[_ngcontent-%COMP%]   .collections-grid[_ngcontent-%COMP%]   .collection-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.user-content[_ngcontent-%COMP%]   .collections-grid[_ngcontent-%COMP%]   .collection-card[_ngcontent-%COMP%]   img[mat-card-image][_ngcontent-%COMP%]{height:150px;object-fit:cover;border-top-left-radius:var(--border-radius-medium);border-top-right-radius:var(--border-radius-medium)}.user-content[_ngcontent-%COMP%]   .friends-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(450px,1fr));gap:var(--spacing-medium);padding:var(--spacing-small)}.user-content[_ngcontent-%COMP%]   .friends-grid[_ngcontent-%COMP%]   .friend-tile[_ngcontent-%COMP%]{height:90px;font-size:var(--font-size-h5)}"]})};export{ze as UserProfileComponent};
