import{a as p}from"./chunk-5TLHWZXQ.js";import{a as s}from"./chunk-4JQI7GWC.js";import{r as m}from"./chunk-R5CXRUDK.js";import{ca as c,ga as a,ma as i,p as n,s as o}from"./chunk-YUWHBJVV.js";var d=class r{apiService=i(s);collectionService=i(p);translation=i(m);collectionItemEndpoint="collectionitem";getCollectionItemId(t,e){return this.apiService.get(`${this.collectionItemEndpoint}/${t}/${e}`)}addMediaItem(t){return this.apiService.post(this.collectionItemEndpoint+"/media",t).pipe(c(()=>{this.collectionService.increaseCollectionItemsCount(t.collectionId)}))}addCustomItem(t){return this.apiService.post(this.collectionItemEndpoint+"/custom",t).pipe(c(()=>{this.collectionService.increaseCollectionItemsCount(t.collectionId)}))}updateCustomItem(t){return this.apiService.patch(this.collectionItemEndpoint+"/custom",t)}updateCustomItemTitle(t,e){if(e=e.trim(),!t.item)return o(()=>new Error(this.translation.translate("error.base")));if(e===t.item.title)return n;if(!e||e.length>100)return o(()=>new Error(`${this.translation.translate("error.lengthError",{value:100})} ${this.translation.translate("error.notEmpty")}`));let l={id:t.id,title:e,description:t.item.description||""};return this.apiService.patch(this.collectionItemEndpoint+"/custom",l)}updateCustomItemDescription(t,e){if(e=e.trim(),!t.item)return o(()=>new Error(this.translation.translate("error.base")));if(e===t.item.description)return n;if(e&&e.length>2e3)return o(()=>new Error(this.translation.translate("error.lengthError",{value:2e3})));let l={id:t.id,title:t.item.title,description:e};return this.apiService.patch(this.collectionItemEndpoint+"/custom",l)}updateItemRating(t){return this.apiService.patch(this.collectionItemEndpoint+"/rating",t)}addSeasonCollectionItem(t){return this.apiService.post(this.collectionItemEndpoint+"/media/season",t)}addEpisodeCollectionItem(t){return this.apiService.post(this.collectionItemEndpoint+"/media/episode",t)}updateItemToDoStatus(t){return this.apiService.patch(this.collectionItemEndpoint+"/todo",t)}deleteItem(t){return this.apiService.delete(this.collectionItemEndpoint,t)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};export{d as a};
