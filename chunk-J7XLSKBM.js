import{c as S}from"./chunk-D5SWGX2S.js";import{b as A,f as R,k as I,p as H}from"./chunk-RMJXZBAS.js";import{Cc as g,Dc as E,Gc as w,Ha as v,Hc as b,Ic as y,Ka as u,Ob as c,Tb as M,Yb as x,Yc as k,bc as a,cc as s,hc as m,ma as F,nb as _,pc as C,rc as o,wa as l,wc as f,xa as d,xb as V,xc as h,yc as T}from"./chunk-YUWHBJVV.js";var P=["inputField"],O=["inputArea"];function Q(i,n){if(i&1&&(a(0,"h1",2),g(1),s()),i&2){let e=o(2);M("title",e.text()),_(),E(e.text())}}function W(i,n){if(i&1){let e=m();a(0,"input",4,0),y("ngModelChange",function(t){l(e);let p=o(2);return b(p.editedText,t)||(p.editedText=t),d(t)}),C("blur",function(){l(e);let t=o(2);return d(t.confirmEdit())})("keydown.enter",function(){l(e);let t=o(2);return d(t.confirmEdit())})("click",function(t){return l(e),d(t.stopPropagation())}),s()}if(i&2){let e=o(2);w("ngModel",e.editedText)}}function D(i,n){if(i&1&&(a(0,"div"),c(1,Q,2,2,"h1",2)(2,W,2,1,"input",3),s()),i&2){let e=o();_(),x(e.isEditing()?2:1)}}function L(i,n){if(i&1&&(a(0,"p"),g(1),s()),i&2){let e=o(2);_(),E(e.text())}}function N(i,n){if(i&1){let e=m();a(0,"textarea",5,1),y("ngModelChange",function(t){l(e);let p=o(2);return b(p.editedText,t)||(p.editedText=t),d(t)}),C("blur",function(){l(e);let t=o(2);return d(t.confirmEdit())})("input",function(){l(e);let t=o(2);return d(t.onInput())})("keydown.enter",function(){l(e);let t=o(2);return d(t.confirmEdit())})("click",function(t){return l(e),d(t.stopPropagation())}),s()}if(i&2){let e=o(2);w("ngModel",e.editedText)}}function j(i,n){if(i&1&&(a(0,"div"),c(1,L,2,1,"p")(2,N,2,1,"textarea",3),s()),i&2){let e=o();_(),x(e.isEditing()?2:1)}}var z=class i{editEnd=new v;inputField;inputArea;isHeader=u(!0);text=u();isEditing=u();cdr=F(k);editedText="";isInputRendered=!1;resizeTimeout;confirmEdit(){this.isInputRendered=!1,this.editEnd.emit(this.editedText.trim())}onInput(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.inputArea&&this.autoResizeTextarea(this.inputArea.nativeElement)},50)}autoResizeTextarea(n){n.style.height="auto",n.style.height=n.scrollHeight+"px"}setCursorOnInputField(){if(!this.inputField&&!this.inputArea){console.error("The inputField has not been initialized.");return}let n=this.isHeader()?this.inputField.nativeElement:this.inputArea.nativeElement;n.focus();let e=n.value.length;n.setSelectionRange(e,e)}ngAfterViewChecked(){this.isEditing()&&!this.isInputRendered&&(this.inputField||this.inputArea)&&setTimeout(()=>{this.editedText=this.text()||"",this.isInputRendered=!0,this.setCursorOnInputField(),this.isHeader()||this.autoResizeTextarea(this.inputArea.nativeElement),this.cdr.detectChanges()})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-editable-text-field"]],viewQuery:function(e,r){if(e&1&&(f(P,5),f(O,5)),e&2){let t;h(t=T())&&(r.inputField=t.first),h(t=T())&&(r.inputArea=t.first)}},inputs:{isHeader:[1,"isHeader"],text:[1,"text"],isEditing:[1,"isEditing"]},outputs:{editEnd:"editEnd"},decls:2,vars:1,consts:[["inputField",""],["inputArea",""],[1,"text",3,"title"],["type","text",1,"edit-input",3,"ngModel"],["type","text",1,"edit-input",3,"ngModelChange","blur","keydown.enter","click","ngModel"],["type","text",1,"edit-input",3,"ngModelChange","blur","input","keydown.enter","click","ngModel"]],template:function(e,r){e&1&&c(0,D,3,1,"div")(1,j,3,1,"div"),e&2&&x(r.isHeader()?0:1)},dependencies:[S,H,A,R,I],styles:["h1[_ngcontent-%COMP%]{font-size:inherit;margin:0}p[_ngcontent-%COMP%]{margin:0;text-align:justify}.edit-input[_ngcontent-%COMP%]{display:flex;font-size:inherit;font-family:inherit;line-height:inherit;border:1px solid var(--background-color);width:100%;outline:none;border-radius:var(--border-radius-small)}.text[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block}"]})};export{z as a};
